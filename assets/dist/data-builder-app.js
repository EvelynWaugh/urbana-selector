import{$ as Qs,r as $,m as ce,n as F,o as Be,q as et,j as e,v as st,w as Ds,x as tt,u as ue,y as rt,z as at,c as me,A as pe,B as Y,C as qe,f as fe,a as nt,D as es,E as ss,F as it,G as lt,J as ot,K as ct,L as dt,M as ut,N as ae,b as I,O as mt,g as pt,h as ht,p as xt,R as G,I as u,d as B,e as L,i as Z,t as he,s as Ne,l as we,P as gt,Q as ks,k as ft,H as jt}from"./middleware.js";import{u as _e,c as W,d as ts,a as rs,b as as,m as ie,e as De,f as ke,g as Ie,h as Fe,i as Oe}from"./index.js";import{u as bt,e as vt,D as yt,W as Nt,S as wt,i as Is,t as Ee,a as V,c as Fs,d as Os,b as us,p as Pt,T as Ct}from"./productData.js";import"./features-animation.js";let Le=new Map,He=!1;try{He=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Pe=!1;try{Pe=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Es={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class Rt{format(a){let t="";if(!He&&this.options.signDisplay!=null?t=_t(this.numberFormatter,this.options.signDisplay,a):t=this.numberFormatter.format(a),this.options.style==="unit"&&!Pe){var r;let{unit:n,unitDisplay:i="short",locale:l}=this.resolvedOptions();if(!n)return t;let c=(r=Es[n])===null||r===void 0?void 0:r[i];t+=c[l]||c.default}return t}formatToParts(a){return this.numberFormatter.formatToParts(a)}formatRange(a,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(a,t);if(t<a)throw new RangeError("End date must be >= start date");return`${this.format(a)} – ${this.format(t)}`}formatRangeToParts(a,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(a,t);if(t<a)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(a),n=this.numberFormatter.formatToParts(t);return[...r.map(i=>({...i,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...n.map(i=>({...i,source:"endRange"}))]}resolvedOptions(){let a=this.numberFormatter.resolvedOptions();return!He&&this.options.signDisplay!=null&&(a={...a,signDisplay:this.options.signDisplay}),!Pe&&this.options.style==="unit"&&(a={...a,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),a}constructor(a,t={}){this.numberFormatter=St(a,t),this.options=t}}function St(s,a={}){let{numberingSystem:t}=a;if(t&&s.includes("-nu-")&&(s.includes("-u-")||(s+="-u-"),s+=`-nu-${t}`),a.style==="unit"&&!Pe){var r;let{unit:l,unitDisplay:c="short"}=a;if(!l)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Es[l])===null||r===void 0)&&r[c]))throw new Error(`Unsupported unit ${l} with unitDisplay = ${c}`);a={...a,style:"decimal"}}let n=s+(a?Object.entries(a).sort((l,c)=>l[0]<c[0]?-1:1).join():"");if(Le.has(n))return Le.get(n);let i=new Intl.NumberFormat(s,a);return Le.set(n,i),i}function _t(s,a,t){if(a==="auto")return s.format(t);if(a==="never")return s.format(Math.abs(t));{let r=!1;if(a==="always"?r=t>0||Object.is(t,0):a==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):r=t>0),r){let n=s.format(-t),i=s.format(t),l=n.replace(i,"").replace(/\u200e|\u061C/,"");return[...l].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),n.replace(i,"!!!").replace(l,"+").replace("!!!",i)}else return s.format(t)}}function Dt(s={}){let{locale:a}=Qs();return $.useMemo(()=>new Rt(a,s),[a,s])}var ms=ce({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden rtl:rotate-180",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient-default bg-stripe-size"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}},{color:"primary",isStriped:!0,class:{indicator:"bg-stripe-gradient-primary bg-stripe-size"}},{color:"secondary",isStriped:!0,class:{indicator:"bg-stripe-gradient-secondary bg-stripe-size"}},{color:"success",isStriped:!0,class:{indicator:"bg-stripe-gradient-success bg-stripe-size"}},{color:"warning",isStriped:!0,class:{indicator:"bg-stripe-gradient-warning bg-stripe-size"}},{color:"danger",isStriped:!0,class:{indicator:"bg-stripe-gradient-danger bg-stripe-size"}}]},{twMerge:!0});ce({slots:{base:"flex flex-col justify-center gap-1 max-w-fit items-center",label:"",svgWrapper:"relative block",svg:"z-0 relative overflow-hidden",track:"h-full stroke-default-300/50",indicator:"h-full stroke-current",value:"absolute font-normal inset-0 flex items-center justify-center"},variants:{color:{default:{svg:"text-default-400"},primary:{svg:"text-primary"},secondary:{svg:"text-secondary"},success:{svg:"text-success"},warning:{svg:"text-warning"},danger:{svg:"text-danger"}},size:{sm:{svg:"w-8 h-8",label:"text-small",value:"text-[0.5rem]"},md:{svg:"w-10 h-10",label:"text-small",value:"text-[0.55rem]"},lg:{svg:"w-12 h-12",label:"text-medium",value:"text-[0.6rem]"}},isIndeterminate:{true:{svg:"animate-spinner-ease-spin"}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-all !duration-500"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{svg:"!transition-none motion-reduce:transition-none"}}]});var ps=ce({base:["px-2","py-1","h-fit","font-mono","font-normal","inline-block","whitespace-nowrap"],variants:{color:{default:F.flat.default,primary:F.flat.primary,secondary:F.flat.secondary,success:F.flat.success,warning:F.flat.warning,danger:F.flat.danger},size:{sm:"text-small",md:"text-medium",lg:"text-large"},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"}},defaultVariants:{color:"default",size:"sm",radius:"sm"}}),hs=ce({slots:{base:"flex flex-grow flex-row w-full items-center py-3 px-4 gap-x-1",mainWrapper:"h-full flex-grow min-h-10 ms-2 flex flex-col box-border items-start text-inherit justify-center",title:"text-small w-full font-medium block text-inherit leading-5",description:"pl-[1px] text-small font-normal text-inherit",closeButton:"relative text-inherit translate-x-1 -translate-y-1",iconWrapper:"flex-none relative w-9 h-9 rounded-full grid place-items-center",alertIcon:"fill-current w-6 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},variants:{color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},variant:{solid:{},flat:{},faded:{base:"border-small"},bordered:{base:"border-small bg-transparent"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},hideIcon:{true:{iconWrapper:"hidden"}},hideIconWrapper:{true:{base:"gap-x-0",iconWrapper:"!bg-transparent !shadow-none !border-none"}},hasContent:{false:{base:"items-center",mainWrapper:"justify-center items-center"}}},defaultVariants:{color:"default",variant:"flat",radius:"md",hideIcon:!1,hideIconWrapper:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:F.solid.default,closeButton:"data-[hover]:bg-default-100",alertIcon:"text-default-foreground"}},{variant:"solid",color:"primary",class:{base:F.solid.primary}},{variant:"solid",color:"secondary",class:{base:F.solid.secondary}},{variant:"solid",color:"success",class:{base:F.solid.success}},{variant:"solid",color:"warning",class:{base:F.solid.warning}},{variant:"solid",color:"danger",class:{base:F.solid.danger}},{variant:["flat","faded"],color:"default",class:{base:[F.flat.default,"bg-default-100 dark:bg-default-50/50","text-default-foreground"],description:"text-default-600",closeButton:"text-default-400",iconWrapper:"bg-default-50 dark:bg-default-100 border-default-200"}},{variant:["flat","faded"],color:"primary",class:{base:[F.flat.primary,"bg-primary-50 dark:bg-primary-50/50"],closeButton:"text-primary-500 data-[hover]:bg-primary-200",iconWrapper:"bg-primary-50 dark:bg-primary-100 border-primary-100"}},{variant:["flat","faded"],color:"secondary",class:{base:[F.flat.secondary,"bg-secondary-50 dark:bg-secondary-50/50"],closeButton:"text-secondary-500 data-[hover]:bg-secondary-200",iconWrapper:"bg-secondary-50 dark:bg-secondary-100 border-secondary-100"}},{variant:["flat","faded"],color:"success",class:{base:[F.flat.success,"bg-success-50 dark:bg-success-50/50"],closeButton:"text-success-500 data-[hover]:bg-success-200",iconWrapper:"bg-success-50 dark:bg-success-100 border-success-100"}},{variant:["flat","faded"],color:"warning",class:{base:[F.flat.warning,"bg-warning-50 dark:bg-warning-50/50"],closeButton:"text-warning-500 data-[hover]:bg-warning-200",iconWrapper:"bg-warning-50 dark:bg-warning-100 border-warning-100"}},{variant:["flat","faded"],color:"danger",class:{base:[F.flat.danger,"bg-danger-50 dark:bg-danger-50/50"],closeButton:"text-danger-500 data-[hover]:bg-danger-200",iconWrapper:"bg-danger-50 dark:bg-danger-100 border-danger-100"}},{variant:"faded",color:"default",class:{base:"border-default-300 dark:border-default-200"}},{variant:"faded",color:"primary",class:{base:"border-primary-200 dark:border-primary-100"}},{variant:"faded",color:"secondary",class:{base:"border-secondary-200"}},{variant:"faded",color:"success",class:{base:"border-success-300 dark:border-success-100"}},{variant:"faded",color:"warning",class:{base:"border-warning-300 dark:border-warning-100"}},{variant:"faded",color:"danger",class:{base:"border-danger-200 dark:border-danger-100"}},{variant:"bordered",color:"default",class:{base:[F.bordered.default],description:"text-default-600",closeButton:"text-default-400"}},{variant:"bordered",color:"primary",class:{base:[F.bordered.primary],closeButton:"data-[hover]:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{base:[F.bordered.secondary],closeButton:"data-[hover]:bg-secondary-50"}},{variant:"bordered",color:"success",class:{base:[F.bordered.success],closeButton:"data-[hover]:bg-success-50"}},{variant:"bordered",color:"warning",class:{base:[F.bordered.warning],closeButton:"data-[hover]:bg-warning-100"}},{variant:"bordered",color:"danger",class:{base:[F.bordered.danger],closeButton:"data-[hover]:bg-danger-50"}},{variant:["flat","bordered","faded"],class:{iconWrapper:"shadow-small"}},{variant:["flat","faded"],class:{iconWrapper:"shadow-small border-1"}},{variant:"bordered",color:"default",class:{iconWrapper:"bg-default-200 dark:bg-default-100"}},{variant:"bordered",color:"primary",class:{iconWrapper:"bg-primary-100 dark:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{iconWrapper:"bg-secondary-100 dark:bg-secondary-50"}},{variant:"bordered",color:"success",class:{iconWrapper:"bg-success-100 dark:bg-success-50"}},{variant:"bordered",color:"warning",class:{iconWrapper:"bg-warning-100 dark:bg-warning-50"}},{variant:"bordered",color:"danger",class:{iconWrapper:"bg-danger-100 dark:bg-danger-50"}}]}),kt=ce({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...et],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...Be,"flex","items-center","justify-center"],name:[...Be,"font-normal","text-center","text-inherit"],icon:[...Be,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:F.solid.default},primary:{base:F.solid.primary},secondary:{base:F.solid.secondary},success:{base:F.solid.success},warning:{base:F.solid.warning},danger:{base:F.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});ce({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var xs=s=>e.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...s,children:e.jsx("path",{d:"M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z"})}),It=()=>e.jsxs("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[e.jsx("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),e.jsx("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[xr,Ft]=st({name:"AvatarGroupContext",strict:!1});function Ot(s={}){var a,t,r,n,i,l,c,p;const g=Ds(),h=Ft(),j=!!h,{as:m,ref:S,src:y,name:D,icon:z,classNames:T,fallback:N,alt:O=D||"avatar",imgRef:A,color:E=(a=h==null?void 0:h.color)!=null?a:"default",radius:w=(t=h==null?void 0:h.radius)!=null?t:"full",size:P=(r=h==null?void 0:h.size)!=null?r:"md",isBordered:b=(n=h==null?void 0:h.isBordered)!=null?n:!1,isDisabled:C=(i=h==null?void 0:h.isDisabled)!=null?i:!1,isFocusable:d=!1,getInitials:v=tt,ignoreFallback:k=!1,showFallback:f=!1,ImgComponent:o="img",imgProps:x,className:_,onError:M,disableAnimation:R,...U}=s,X=m||"span",Ge=ue(S),Me=ue(A),{isFocusVisible:qs,isFocused:Hs,focusProps:ls}=rt(),{isHovered:Ks,hoverProps:Js}=at({isDisabled:C}),be=(l=R??(g==null?void 0:g.disableAnimation))!=null?l:!1,os=(p=typeof o=="object"&&((c=o==null?void 0:o.displayName)==null?void 0:c.includes("HeroUI")))!=null?p:!1,ve=bt({src:y,onError:M,ignoreFallback:k,shouldBypassImageLoad:m!==void 0||o!=="img"&&!os})==="loaded",cs=!os,Ys=(!y||!ve)&&f,de=$.useMemo(()=>{var ee;return kt({color:E,radius:w,size:P,isBordered:b,isDisabled:C,isInGroup:j,disableAnimation:be,isInGridGroup:(ee=h==null?void 0:h.isGrid)!=null?ee:!1})},[E,w,P,b,C,be,j,h==null?void 0:h.isGrid]),ds=me(T==null?void 0:T.base,_),$e=$.useMemo(()=>d||m==="button",[d,m]),Zs=$.useCallback((ee={})=>({ref:Ge,tabIndex:$e?0:-1,"data-hover":Y(Ks),"data-focus":Y(Hs),"data-focus-visible":Y(qs),className:de.base({class:me(ds,ee==null?void 0:ee.className)}),...pe(U,Js,$e?ls:{})}),[$e,de,ds,ls,U]),Xs=$.useCallback((ee={})=>({ref:Me,src:y,"data-loaded":Y(ve),className:de.img({class:T==null?void 0:T.img}),...pe(x,ee,qe({disableAnimation:be},{enabled:cs}))}),[de,ve,x,be,y,Me,cs]);return{Component:X,ImgComponent:o,src:y,alt:O,icon:z,name:D,imgRef:Me,slots:de,classNames:T,fallback:N,isImgLoaded:ve,showFallback:Ys,ignoreFallback:k,getInitials:v,getAvatarProps:Zs,getImageProps:Xs}}var Ts=fe((s,a)=>{const{Component:t,ImgComponent:r,src:n,icon:i=e.jsx(It,{}),alt:l,classNames:c,slots:p,name:g,showFallback:h,fallback:j,getInitials:m,getAvatarProps:S,getImageProps:y}=Ot({...s,ref:a}),D=$.useMemo(()=>!h&&n?null:j?e.jsx("div",{"aria-label":l,className:p.fallback({class:c==null?void 0:c.fallback}),role:"img",children:j}):g?e.jsx("span",{"aria-label":l,className:p.name({class:c==null?void 0:c.name}),role:"img",children:m(g)}):e.jsx("span",{"aria-label":l,className:p.icon({class:c==null?void 0:c.icon}),role:"img",children:i}),[h,n,j,g,c]);return e.jsxs(t,{...S(),children:[n&&e.jsx(r,{...y(),alt:l}),D]})});Ts.displayName="HeroUI.Avatar";var ne=Ts,As=fe((s,a)=>{var t;const{as:r,className:n,children:i,...l}=s,c=r||"div",p=ue(a),{slots:g,classNames:h}=nt(),j=me(h==null?void 0:h.header,n);return e.jsx(c,{ref:p,className:(t=g.header)==null?void 0:t.call(g,{class:j}),...l,children:i})});As.displayName="HeroUI.CardHeader";var K=As;function Et(s){const[a,t]=es(s,ps.variantKeys),{as:r,children:n,className:i,...l}=a,c=r||"code",p=$.useMemo(()=>ps({...t,className:i}),[ss(t),i]);return{Component:c,children:n,getCodeProps:()=>({className:p,...l})}}var zs=fe((s,a)=>{const{Component:t,children:r,getCodeProps:n}=Et({...s});return e.jsx(t,{ref:a,...n(),children:r})});zs.displayName="HeroUI.Code";var Tt=zs;function At(s){let{value:a=0,minValue:t=0,maxValue:r=100,valueLabel:n,isIndeterminate:i,formatOptions:l={style:"percent"}}=s,c=it(s,{labelable:!0}),{labelProps:p,fieldProps:g}=lt({...s,labelElementType:"span"});a=ct(a,t,r);let h=(a-t)/(r-t),j=Dt(l);if(!i&&!n){let m=l.style==="percent"?h:a;n=j.format(m)}return{progressBarProps:ot(c,{...g,"aria-valuenow":i?void 0:a,"aria-valuemin":t,"aria-valuemax":r,"aria-valuetext":i?void 0:n,role:"progressbar"}),labelProps:p}}function zt(s){var a,t;const r=Ds(),[n,i]=es(s,ms.variantKeys),{ref:l,as:c,id:p,className:g,classNames:h,label:j,valueLabel:m,value:S=0,minValue:y=0,maxValue:D=100,showValueLabel:z=!1,formatOptions:T={style:"percent"},...N}=n,O=c||"div",A=ue(l),E=me(h==null?void 0:h.base,g),[,w]=vt({rerender:!0,delay:100}),P=s.isIndeterminate,b=(t=(a=s.disableAnimation)!=null?a:r==null?void 0:r.disableAnimation)!=null?t:!1,{progressBarProps:C,labelProps:d}=At({id:p,label:j,value:S,minValue:y,maxValue:D,valueLabel:m,formatOptions:T,isIndeterminate:P,"aria-labelledby":s["aria-labelledby"],"aria-label":s["aria-label"]}),v=$.useMemo(()=>ms({...i,disableAnimation:b}),[ss(i),b]),k=b?!0:w,f=$.useMemo(()=>P||!k?void 0:dt((S-y)/(D-y)*100),[k,P,S,y,D]),o=$.useCallback((_={})=>({ref:A,"data-indeterminate":Y(P),"data-disabled":Y(s.isDisabled),className:v.base({class:E}),...pe(C,N,_)}),[A,v,P,s.isDisabled,E,C,N]),x=$.useCallback((_={})=>({className:v.label({class:h==null?void 0:h.label}),...pe(d,_)}),[v,h,d]);return{Component:O,domRef:A,slots:v,classNames:h,label:j,percentage:f,showValueLabel:z,getProgressBarProps:o,getLabelProps:x}}var Gs=fe((s,a)=>{const{Component:t,slots:r,classNames:n,label:i,percentage:l,showValueLabel:c,getProgressBarProps:p,getLabelProps:g}=zt({...s,ref:a}),h=p(),j=i||c;return e.jsxs(t,{...h,children:[j?e.jsxs("div",{className:r.labelWrapper({class:n==null?void 0:n.labelWrapper}),children:[i&&e.jsx("span",{...g(),children:i}),c&&e.jsx("span",{className:r.value({class:n==null?void 0:n.value}),children:h["aria-valuetext"]})]}):null,e.jsx("div",{className:r.track({class:n==null?void 0:n.track}),children:e.jsx("div",{className:r.indicator({class:n==null?void 0:n.indicator}),style:{transform:`translateX(-${100-(l||0)}%)`}})})]})});Gs.displayName="HeroUI.Progress";var Gt=Gs;function Mt(s){const[a,t]=es(s,hs.variantKeys),{as:r,title:n,children:i,description:l,onClose:c,isClosable:p,ref:g,icon:h,startContent:j,endContent:m,isVisible:S,isDefaultVisible:y,onVisibleChange:D,closeButtonProps:z={size:"sm"},className:T,classNames:N,...O}=a,[A,E]=ut(S,y??!0,D),P=typeof(r||"div")=="string",b=ue(g),C=$.useCallback(()=>{E(!1),c==null||c()},[E,c]),d=me(N==null?void 0:N.base,T),v=$.useMemo(()=>hs({hasContent:!ae(l)||!ae(i),...t}),[l,ss(t)]),k=$.useCallback(()=>({"data-visible":Y(A),"data-closeable":Y(p),"data-has-title":Y(!ae(n)),"data-has-description":Y(!ae(l)),...pe(qe(O,{enabled:P}),qe(a)),className:v.base({class:d})}),[v,d]),f=$.useCallback(()=>({className:v.mainWrapper({class:N==null?void 0:N.mainWrapper})}),[v,N==null?void 0:N.mainWrapper]),o=$.useCallback(()=>({className:v.description({class:N==null?void 0:N.description})}),[v,N==null?void 0:N.description]),x=$.useCallback(()=>({className:v.title({class:N==null?void 0:N.title})}),[v,N==null?void 0:N.title]),_=$.useCallback(()=>({...z,className:v.closeButton({class:N==null?void 0:N.closeButton})}),[v,N==null?void 0:N.closeButton]),M=$.useCallback(()=>({className:v.alertIcon({class:N==null?void 0:N.alertIcon})}),[v,N==null?void 0:N.alertIcon]),R=$.useCallback(()=>({className:v.iconWrapper({class:N==null?void 0:N.iconWrapper})}),[v,N==null?void 0:N.iconWrapper]);return{title:n,icon:h,children:i,description:l,isClosable:p,domRef:b,endContent:m,startContent:j,getBaseProps:k,getMainWrapperProps:f,getDescriptionProps:o,getTitleProps:x,color:t.color,getCloseButtonProps:_,handleClose:C,isVisible:A,onClose:c,getAlertIconProps:M,getIconWrapperProps:R}}var gs={primary:xs,secondary:xs,success:wt,warning:Nt,danger:yt},Ms=fe((s,a)=>{const{title:t,icon:r,children:n,description:i,endContent:l,startContent:c,isClosable:p,domRef:g,handleClose:h,getBaseProps:j,getMainWrapperProps:m,getDescriptionProps:S,getTitleProps:y,getCloseButtonProps:D,color:z,isVisible:T,onClose:N,getAlertIconProps:O,getIconWrapperProps:A}=Mt({...s,ref:a});if(!T)return null;const E=r&&$.isValidElement(r)?$.cloneElement(r,O()):null,w=gs[z]||gs.primary;return e.jsxs("div",{ref:g,role:"alert",...j(),children:[c,e.jsx("div",{...A(),children:E||e.jsx(w,{...O()})}),e.jsxs("div",{...m(),children:[!ae(t)&&e.jsx("div",{...y(),children:t}),!ae(i)&&e.jsx("div",{...S(),children:i}),n]}),l,(p||N)&&e.jsx(I,{isIconOnly:!0,"aria-label":"Close",radius:"full",variant:"light",onPress:h,...D(),children:e.jsx(mt,{height:20,width:20})})]})});Ms.displayName="HeroUI.Alert";var fs=Ms,$s=Symbol.for("immer-nothing"),js=Symbol.for("immer-draftable"),q=Symbol.for("immer-state");function J(s,...a){throw new Error(`[Immer] minified error nr: ${s}. Full error at: https://bit.ly/3cXEKWf`)}var le=Object.getPrototypeOf;function oe(s){return!!s&&!!s[q]}function te(s){var a;return s?Bs(s)||Array.isArray(s)||!!s[js]||!!((a=s.constructor)!=null&&a[js])||je(s)||Ae(s):!1}var $t=Object.prototype.constructor.toString();function Bs(s){if(!s||typeof s!="object")return!1;const a=le(s);if(a===null)return!0;const t=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===$t}function Ce(s,a){Te(s)===0?Reflect.ownKeys(s).forEach(t=>{a(t,s[t],s)}):s.forEach((t,r)=>a(r,t,s))}function Te(s){const a=s[q];return a?a.type_:Array.isArray(s)?1:je(s)?2:Ae(s)?3:0}function Ke(s,a){return Te(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function Ls(s,a,t){const r=Te(s);r===2?s.set(a,t):r===3?s.add(t):s[a]=t}function Bt(s,a){return s===a?s!==0||1/s===1/a:s!==s&&a!==a}function je(s){return s instanceof Map}function Ae(s){return s instanceof Set}function se(s){return s.copy_||s.base_}function Je(s,a){if(je(s))return new Map(s);if(Ae(s))return new Set(s);if(Array.isArray(s))return Array.prototype.slice.call(s);const t=Bs(s);if(a===!0||a==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(s);delete r[q];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){const l=n[i],c=r[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:s[l]})}return Object.create(le(s),r)}else{const r=le(s);if(r!==null&&t)return{...s};const n=Object.create(r);return Object.assign(n,s)}}function ns(s,a=!1){return ze(s)||oe(s)||!te(s)||(Te(s)>1&&Object.defineProperties(s,{set:{value:ye},add:{value:ye},clear:{value:ye},delete:{value:ye}}),Object.freeze(s),a&&Object.values(s).forEach(t=>ns(t,!0))),s}function ye(){J(2)}function ze(s){return Object.isFrozen(s)}var Lt={};function re(s){const a=Lt[s];return a||J(0,s),a}var xe;function Ws(){return xe}function Wt(s,a){return{drafts_:[],parent_:s,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function bs(s,a){a&&(re("Patches"),s.patches_=[],s.inversePatches_=[],s.patchListener_=a)}function Ye(s){Ze(s),s.drafts_.forEach(Ut),s.drafts_=null}function Ze(s){s===xe&&(xe=s.parent_)}function vs(s){return xe=Wt(xe,s)}function Ut(s){const a=s[q];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function ys(s,a){a.unfinalizedDrafts_=a.drafts_.length;const t=a.drafts_[0];return s!==void 0&&s!==t?(t[q].modified_&&(Ye(a),J(4)),te(s)&&(s=Re(a,s),a.parent_||Se(a,s)),a.patches_&&re("Patches").generateReplacementPatches_(t[q].base_,s,a.patches_,a.inversePatches_)):s=Re(a,t,[]),Ye(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),s!==$s?s:void 0}function Re(s,a,t){if(ze(a))return a;const r=a[q];if(!r)return Ce(a,(n,i)=>Ns(s,r,a,n,i,t)),a;if(r.scope_!==s)return a;if(!r.modified_)return Se(s,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const n=r.copy_;let i=n,l=!1;r.type_===3&&(i=new Set(n),n.clear(),l=!0),Ce(i,(c,p)=>Ns(s,r,n,c,p,t,l)),Se(s,n,!1),t&&s.patches_&&re("Patches").generatePatches_(r,t,s.patches_,s.inversePatches_)}return r.copy_}function Ns(s,a,t,r,n,i,l){if(oe(n)){const c=i&&a&&a.type_!==3&&!Ke(a.assigned_,r)?i.concat(r):void 0,p=Re(s,n,c);if(Ls(t,r,p),oe(p))s.canAutoFreeze_=!1;else return}else l&&t.add(n);if(te(n)&&!ze(n)){if(!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1)return;Re(s,n),(!a||!a.scope_.parent_)&&typeof r!="symbol"&&(je(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&Se(s,n)}}function Se(s,a,t=!1){!s.parent_&&s.immer_.autoFreeze_&&s.canAutoFreeze_&&ns(a,t)}function Vt(s,a){const t=Array.isArray(s),r={type_:t?1:0,scope_:a?a.scope_:Ws(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:s,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=r,i=is;t&&(n=[r],i=ge);const{revoke:l,proxy:c}=Proxy.revocable(n,i);return r.draft_=c,r.revoke_=l,c}var is={get(s,a){if(a===q)return s;const t=se(s);if(!Ke(t,a))return qt(s,t,a);const r=t[a];return s.finalized_||!te(r)?r:r===We(s.base_,a)?(Ue(s),s.copy_[a]=Qe(r,s)):r},has(s,a){return a in se(s)},ownKeys(s){return Reflect.ownKeys(se(s))},set(s,a,t){const r=Us(se(s),a);if(r!=null&&r.set)return r.set.call(s.draft_,t),!0;if(!s.modified_){const n=We(se(s),a),i=n==null?void 0:n[q];if(i&&i.base_===t)return s.copy_[a]=t,s.assigned_[a]=!1,!0;if(Bt(t,n)&&(t!==void 0||Ke(s.base_,a)))return!0;Ue(s),Xe(s)}return s.copy_[a]===t&&(t!==void 0||a in s.copy_)||Number.isNaN(t)&&Number.isNaN(s.copy_[a])||(s.copy_[a]=t,s.assigned_[a]=!0),!0},deleteProperty(s,a){return We(s.base_,a)!==void 0||a in s.base_?(s.assigned_[a]=!1,Ue(s),Xe(s)):delete s.assigned_[a],s.copy_&&delete s.copy_[a],!0},getOwnPropertyDescriptor(s,a){const t=se(s),r=Reflect.getOwnPropertyDescriptor(t,a);return r&&{writable:!0,configurable:s.type_!==1||a!=="length",enumerable:r.enumerable,value:t[a]}},defineProperty(){J(11)},getPrototypeOf(s){return le(s.base_)},setPrototypeOf(){J(12)}},ge={};Ce(is,(s,a)=>{ge[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});ge.deleteProperty=function(s,a){return ge.set.call(this,s,a,void 0)};ge.set=function(s,a,t){return is.set.call(this,s[0],a,t,s[0])};function We(s,a){const t=s[q];return(t?se(t):s)[a]}function qt(s,a,t){var n;const r=Us(a,t);return r?"value"in r?r.value:(n=r.get)==null?void 0:n.call(s.draft_):void 0}function Us(s,a){if(!(a in s))return;let t=le(s);for(;t;){const r=Object.getOwnPropertyDescriptor(t,a);if(r)return r;t=le(t)}}function Xe(s){s.modified_||(s.modified_=!0,s.parent_&&Xe(s.parent_))}function Ue(s){s.copy_||(s.copy_=Je(s.base_,s.scope_.immer_.useStrictShallowCopy_))}var Ht=class{constructor(s){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,t,r)=>{if(typeof a=="function"&&typeof t!="function"){const i=t;t=a;const l=this;return function(p=i,...g){return l.produce(p,h=>t.call(this,h,...g))}}typeof t!="function"&&J(6),r!==void 0&&typeof r!="function"&&J(7);let n;if(te(a)){const i=vs(this),l=Qe(a,void 0);let c=!0;try{n=t(l),c=!1}finally{c?Ye(i):Ze(i)}return bs(i,r),ys(n,i)}else if(!a||typeof a!="object"){if(n=t(a),n===void 0&&(n=a),n===$s&&(n=void 0),this.autoFreeze_&&ns(n,!0),r){const i=[],l=[];re("Patches").generateReplacementPatches_(a,n,i,l),r(i,l)}return n}else J(1,a)},this.produceWithPatches=(a,t)=>{if(typeof a=="function")return(l,...c)=>this.produceWithPatches(l,p=>a(p,...c));let r,n;return[this.produce(a,t,(l,c)=>{r=l,n=c}),r,n]},typeof(s==null?void 0:s.autoFreeze)=="boolean"&&this.setAutoFreeze(s.autoFreeze),typeof(s==null?void 0:s.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(s.useStrictShallowCopy)}createDraft(s){te(s)||J(8),oe(s)&&(s=Kt(s));const a=vs(this),t=Qe(s,void 0);return t[q].isManual_=!0,Ze(a),t}finishDraft(s,a){const t=s&&s[q];(!t||!t.isManual_)&&J(9);const{scope_:r}=t;return bs(r,a),ys(void 0,r)}setAutoFreeze(s){this.autoFreeze_=s}setUseStrictShallowCopy(s){this.useStrictShallowCopy_=s}applyPatches(s,a){let t;for(t=a.length-1;t>=0;t--){const n=a[t];if(n.path.length===0&&n.op==="replace"){s=n.value;break}}t>-1&&(a=a.slice(t+1));const r=re("Patches").applyPatches_;return oe(s)?r(s,a):this.produce(s,n=>r(n,a))}};function Qe(s,a){const t=je(s)?re("MapSet").proxyMap_(s,a):Ae(s)?re("MapSet").proxySet_(s,a):Vt(s,a);return(a?a.scope_:Ws()).drafts_.push(t),t}function Kt(s){return oe(s)||J(10,s),Vs(s)}function Vs(s){if(!te(s)||ze(s))return s;const a=s[q];let t;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,t=Je(s,a.scope_.immer_.useStrictShallowCopy_)}else t=Je(s,!0);return Ce(t,(r,n)=>{Ls(t,r,Vs(n))}),a&&(a.finalized_=!1),t}var Jt=new Ht,Yt=Jt.produce;const Zt=s=>(a,t,r)=>(r.setState=(n,i,...l)=>{const c=typeof n=="function"?Yt(n):n;return a(c,i,...l)},s(r.setState,t,r)),Xt=Zt,H=s=>s.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),ws=s=>({Shelter:"lucide:home",Toilet:"lucide:bath",Bridge:"lucide:route",Access:"lucide:wheelchair",Seating:"lucide:armchair",Lighting:"lucide:lamp"})[s]||"lucide:box",Ps=s=>({Shelter:"Outdoor structures for shade and protection",Toilet:"Public and portable sanitation facilities",Bridge:"Pedestrian and light vehicle crossings",Access:"Ramps, stairs, and accessibility solutions",Seating:"Benches and outdoor furniture options",Lighting:"Outdoor and pathway lighting solutions"})[s]||"Product category",Cs=s=>({Peninsula:"Modern shelters with excellent weather protection for parks and urban settings",Whyalla:"Robust shelters designed for coastal and high-wind environments",Coastal:"Corrosion-resistant designs perfect for beachfront and marine locations",Urban:"Contemporary designs that blend with modern city landscapes",Heritage:"Traditional designs that complement historic and cultural settings",EcoSan:"Environmentally friendly composting toilet solutions with minimal water usage",Standard:"Reliable and cost-effective public toilet facilities",Accessible:"Fully compliant accessible toilet facilities with enhanced features",Premium:"High-end toilet facilities with superior finishes and amenities",Compact:"Space-saving designs for areas with limited footprint","Small Span":"Compact bridges for garden paths and small water crossings","Large Span":"Extended bridges for wider crossings and heavier loads",Pedestrian:"Dedicated walkways designed for high foot traffic areas",Decorative:"Ornamental bridges that serve as landscape features","Heavy Duty":"Reinforced bridges capable of supporting maintenance vehicles"})[s]||`${s} product range`,Rs=s=>{const a={Peninsula:["Modern","Weather-resistant","Versatile"],Whyalla:["Robust","Wind-resistant","Durable"],Coastal:["Corrosion-resistant","Salt-proof","UV-stable"],Urban:["Contemporary","Modular","Space-efficient"],Heritage:["Traditional","Ornate","Classic"],EcoSan:["Eco-friendly","Low-water","Composting"],Standard:["Cost-effective","Reliable","Low-maintenance"],Accessible:["ADA Compliant","Spacious","Universal"],Premium:["High-end","Enhanced features","Superior finishes"],Compact:["Space-saving","Efficient","Urban-friendly"],"Small Span":["Compact","Decorative","Easy-install"],"Large Span":["Extended","Reinforced","Heavy-load"],Pedestrian:["High-traffic","Safety-focused","Accessible"],Decorative:["Ornamental","Artistic","Feature piece"],"Heavy Duty":["Vehicle-rated","Industrial","Maximum strength"],default:["Quality","Durable","Customizable"]};return a[s]||a.default},Ve={stepperForm:{steps:[{step:1,title:"Select Product Group",categories:[]},{step:2,title:"Select Product Range",ranges:{}},{step:3,title:"Select Individual Product",products:{}},{step:4,title:"View Product Content",productDetails:{}},{step:5,title:"Configure Options",options:{}},{step:6,title:"Contact Information",fields:[{name:"fullName",label:"Full Name",type:"text",required:!0},{name:"email",label:"Email Address",type:"email",required:!0},{name:"phone",label:"Phone Number",type:"tel",required:!1},{name:"company",label:"Company/Organization",type:"text",required:!1},{name:"message",label:"Additional Notes",type:"textarea",required:!1}]}]}},Q=pt()(ht(xt(Xt((s,a)=>({productData:Ve,productGroups:[],productRanges:[],products:[],relationships:{groupToRanges:{},rangeToProducts:{}},isDirty:!1,isSaving:!1,isLoading:!1,lastSaved:null,error:null,getRangesForGroup:t=>{const{productRanges:r,relationships:n}=a(),i=n.groupToRanges[t]||[];return r.filter(l=>i.includes(l.id))},getProductsForRange:t=>{const{products:r,relationships:n}=a(),i=n.rangeToProducts[t]||[];return r.filter(l=>i.includes(l.id))},getProductById:t=>{const{products:r}=a();return r.find(n=>n.id===t)},getGroupById:t=>{const{productGroups:r}=a();return r.find(n=>n.id===t)},getRangeById:t=>{const{productRanges:r}=a();return r.find(n=>n.id===t)},initializeFromProductData:t=>s(r=>{r.productData=t;const n=(t.stepperForm.steps[0].categories||[]).map(g=>({id:H(g),name:g,icon:ws(g),description:Ps(g)}));r.productGroups=n;const i=[];Object.entries(t.stepperForm.steps[1].ranges||{}).forEach(([g,h])=>{h.forEach(j=>{i.push({id:H(j),name:j,image:"",description:Cs(j),tags:Rs(j)})})}),r.productRanges=i;const l=[];Object.entries(t.stepperForm.steps[2].products||{}).forEach(([g,h])=>{h.forEach(j=>{var S;const m=(S=t.stepperForm.steps[3].productDetails)==null?void 0:S[j];l.push({id:H(j),code:j,name:(m==null?void 0:m.name)||`${j} Product`,overview:(m==null?void 0:m.overview)||"",description:(m==null?void 0:m.description)||"",specifications:(m==null?void 0:m.specifications)||[],imageGallery:(m==null?void 0:m.imageGallery)||[],files:(m==null?void 0:m.files)||{}})})}),r.products=l;const c={};Object.entries(t.stepperForm.steps[1].ranges||{}).forEach(([g,h])=>{const j=H(g);c[j]=h.map(m=>H(m))});const p={};Object.entries(t.stepperForm.steps[2].products||{}).forEach(([g,h])=>{const j=H(g);p[j]=h.map(m=>H(m))}),r.relationships={groupToRanges:c,rangeToProducts:p}}),updateProductData:t=>s(r=>{r.productData=t,r.isDirty=!0}),exportData:()=>{const{productGroups:t,productRanges:r,products:n,relationships:i,productData:l}=a();return{stepperForm:{steps:[{step:1,title:"Select Product Group",categories:t.map(p=>p.name)},{step:2,title:"Select Product Range",ranges:(()=>{const p={};return Object.entries(i.groupToRanges).forEach(([g,h])=>{const j=t.find(m=>m.id===g);j&&(p[j.name]=h.map(m=>{const S=r.find(y=>y.id===m);return S?S.name:""}).filter(m=>m!==""))}),p})()},{step:3,title:"Select Individual Product",products:(()=>{const p={};return Object.entries(i.rangeToProducts).forEach(([g,h])=>{const j=r.find(m=>m.id===g);j&&(p[j.name]=h.map(m=>{const S=n.find(y=>y.id===m);return S?S.code:""}).filter(m=>m!==""))}),p})()},{step:4,title:"View Product Content",productDetails:(()=>{const p={};return n.forEach(g=>{p[g.code]={name:g.name,overview:g.overview,description:g.description,specifications:g.specifications,imageGallery:g.imageGallery,files:g.files}}),p})()},l.stepperForm.steps[4]||{step:5,title:"Configure Options",options:{}},l.stepperForm.steps[5]||{step:6,title:"Contact Information",fields:Ve.stepperForm.steps[5].fields}]}}},addProductGroup:t=>s(r=>{const n=H(t.name),i={...t,id:n,icon:t.icon||ws(t.name),description:t.description||Ps(t.name)};r.productGroups.some(c=>c.id===n)||(r.productGroups.push(i),r.relationships.groupToRanges[n]=[],r.isDirty=!0)}),updateProductGroup:(t,r)=>s(n=>{const i=n.productGroups.findIndex(l=>l.id===t);i!==-1&&(n.productGroups[i]={...n.productGroups[i],...r},n.isDirty=!0)}),removeProductGroup:t=>s(r=>{r.productGroups=r.productGroups.filter(i=>i.id!==t),(r.relationships.groupToRanges[t]||[]).forEach(i=>{r.productRanges=r.productRanges.filter(c=>c.id!==i),(r.relationships.rangeToProducts[i]||[]).forEach(c=>{r.products=r.products.filter(p=>p.id!==c)}),delete r.relationships.rangeToProducts[i]}),delete r.relationships.groupToRanges[t],r.isDirty=!0}),addProductRange:t=>s(r=>{const n=H(t.name),i={...t,id:n,description:t.description||Cs(t.name),tags:t.tags||Rs(t.name)};r.productRanges.some(c=>c.id===n)||(r.productRanges.push(i),r.relationships.rangeToProducts[n]=[],r.isDirty=!0)}),updateProductRange:(t,r)=>s(n=>{const i=n.productRanges.findIndex(l=>l.id===t);i!==-1&&(n.productRanges[i]={...n.productRanges[i],...r},n.isDirty=!0)}),removeProductRange:t=>s(r=>{r.productRanges=r.productRanges.filter(i=>i.id!==t),(r.relationships.rangeToProducts[t]||[]).forEach(i=>{r.products=r.products.filter(l=>l.id!==i)}),Object.keys(r.relationships.groupToRanges).forEach(i=>{r.relationships.groupToRanges[i]=r.relationships.groupToRanges[i].filter(l=>l!==t)}),delete r.relationships.rangeToProducts[t],r.isDirty=!0}),addProduct:t=>s(r=>{const n=H(t.code||t.name),i={...t,id:n,code:t.code||H(t.name)};r.products.some(c=>c.id===n)||(r.products.push(i),r.isDirty=!0)}),updateProduct:(t,r)=>s(n=>{const i=n.products.findIndex(l=>l.id===t);i!==-1&&(n.products[i]={...n.products[i],...r},n.isDirty=!0)}),removeProduct:t=>s(r=>{r.products=r.products.filter(n=>n.id!==t),Object.keys(r.relationships.rangeToProducts).forEach(n=>{r.relationships.rangeToProducts[n]=r.relationships.rangeToProducts[n].filter(i=>i!==t)}),r.isDirty=!0}),linkRangeToGroup:(t,r)=>s(n=>{n.relationships.groupToRanges[t]||(n.relationships.groupToRanges[t]=[]),n.relationships.groupToRanges[t].includes(r)||(n.relationships.groupToRanges[t].push(r),n.isDirty=!0)}),unlinkRangeFromGroup:(t,r)=>s(n=>{n.relationships.groupToRanges[t]&&(n.relationships.groupToRanges[t]=n.relationships.groupToRanges[t].filter(i=>i!==r),n.isDirty=!0)}),linkProductToRange:(t,r)=>s(n=>{n.relationships.rangeToProducts[t]||(n.relationships.rangeToProducts[t]=[]),n.relationships.rangeToProducts[t].includes(r)||(n.relationships.rangeToProducts[t].push(r),n.isDirty=!0)}),unlinkProductFromRange:(t,r)=>s(n=>{n.relationships.rangeToProducts[t]&&(n.relationships.rangeToProducts[t]=n.relationships.rangeToProducts[t].filter(i=>i!==r),n.isDirty=!0)}),updateRelationships:t=>s(r=>{r.relationships=t,r.isDirty=!0}),updateOptions:t=>s(r=>{r.productData.stepperForm.steps[4]&&(r.productData.stepperForm.steps[4].options=t,r.isDirty=!0)}),updateContactFields:t=>s(r=>{r.productData.stepperForm.steps[5]&&(r.productData.stepperForm.steps[5].fields=t,r.isDirty=!0)}),saveData:async()=>{var t;s(r=>{r.isSaving=!0,r.error=null});try{const r=a().exportData();if(!(await fetch("/wp-json/urbana/v1/product-data",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((t=window.urbanaAdmin)==null?void 0:t.nonce)||""},body:JSON.stringify(r)})).ok)throw new Error("Failed to save data");s(i=>{i.productData=r,i.isDirty=!1,i.lastSaved=new Date})}catch(r){const n=r instanceof Error?r.message:"Unknown error occurred";throw s(i=>{i.error=n}),r}finally{s(r=>{r.isSaving=!1})}},loadData:async()=>{var t;s(r=>{r.isLoading=!0,r.error=null});try{const r=await fetch("/wp-json/urbana/v1/product-data",{method:"GET",headers:{"X-WP-Nonce":((t=window.urbanaAdmin)==null?void 0:t.nonce)||""}});if(!r.ok)throw new Error("Failed to load data");const n=await r.json();a().initializeFromProductData(n)}catch(r){const n=r instanceof Error?r.message:"Unknown error occurred";throw s(i=>{i.error=n}),r}finally{s(r=>{r.isLoading=!1})}},resetData:()=>s(t=>{t.productData=Ve,t.productGroups=[],t.productRanges=[],t.products=[],t.relationships={groupToRanges:{},rangeToProducts:{}},t.isDirty=!1,t.lastSaved=null,t.error=null}),importData:t=>s(r=>{r.isDirty=!0,r.lastSaved=null,r.error=null,a().initializeFromProductData(t)}),setError:t=>s(r=>{r.error=t}),clearError:()=>s(t=>{t.error=null})})),{name:"urbana-data-builder-storage",partialize:s=>({productData:s.productData,productGroups:s.productGroups,productRanges:s.productRanges,products:s.products,relationships:s.relationships,lastSaved:s.lastSaved})}),{name:"urbana-data-builder"})),Qt=({selectedIcon:s,onIconSelect:a})=>{const t=["lucide:box","lucide:home","lucide:bath","lucide:route","lucide:wheelchair","lucide:armchair","lucide:lamp","lucide:tree","lucide:building","lucide:car","lucide:tools","lucide:shield"];return e.jsx("div",{className:"grid grid-cols-6 gap-2",children:t.map(r=>e.jsx(I,{isIconOnly:!0,variant:s===r?"solid":"bordered",color:s===r?"primary":"default",onPress:()=>a(r),className:"h-12 w-12",children:e.jsx(u,{icon:r,width:20})},r))})},er=()=>{const{productGroups:s,addProductGroup:a,updateProductGroup:t,removeProductGroup:r,getRangesForGroup:n}=Q(),{isOpen:i,onOpen:l,onOpenChange:c,onClose:p}=_e(),[g,h]=G.useState(null),[j,m]=G.useState({name:"",icon:"lucide:box",description:""}),[S,y]=G.useState({}),D=()=>{h(null),m({name:"",icon:"lucide:box",description:""}),y({}),l()},z=w=>{h(w),m({name:w.name,icon:w.icon,description:w.description}),y({}),l()},T=w=>{const P=n(w).length,b=P>0?`Are you sure you want to delete this product group? This will also remove ${P} associated range(s) and their products.`:"Are you sure you want to delete this product group?";confirm(b)&&r(w)},N=(w,P)=>{m(b=>({...b,[w]:P})),S[w]&&y(b=>({...b,[w]:""}))},O=w=>{m(P=>({...P,icon:w}))},A=()=>{const w={};return j.name.trim()||(w.name="Name is required"),s.some(b=>b.name.toLowerCase()===j.name.toLowerCase()&&(!g||b.id!==g.id))&&(w.name="A product group with this name already exists"),j.description.trim()||(w.description="Description is required"),y(w),Object.keys(w).length===0},E=()=>{A()&&(g?t(g.id,j):a(j),p())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Product Groups"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Organize your products into logical categories"})]}),e.jsx(I,{color:"primary",onPress:D,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product Group"})]}),s.length===0?e.jsx(B,{children:e.jsx(L,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:layers",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Groups Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create your first product group to get started"})]}),e.jsx(I,{color:"primary",onPress:D,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product Group"})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(w=>{const P=n(w.id).length;return e.jsxs(B,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{icon:e.jsx(u,{icon:w.icon,width:20}),className:"bg-primary-100 text-primary-800",size:"sm"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:w.name}),e.jsxs(W,{size:"sm",variant:"flat",color:"primary",children:[P," range",P!==1?"s":""]})]})]}),e.jsxs(ts,{children:[e.jsx(rs,{children:e.jsx(I,{isIconOnly:!0,variant:"light",size:"sm",children:e.jsx(u,{icon:"lucide:more-vertical",width:16})})}),e.jsxs(as,{"aria-label":"Group Actions",children:[e.jsx(ie,{startContent:e.jsx(u,{icon:"lucide:edit",width:16}),onPress:()=>z(w),children:"Edit"},"edit"),e.jsx(ie,{className:"text-danger",color:"danger",startContent:e.jsx(u,{icon:"lucide:trash",width:16}),onPress:()=>T(w.id),children:"Delete"},"delete")]})]})]})}),e.jsx(L,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-foreground-600",children:w.description})})]},w.id)})}),e.jsx(De,{isOpen:i,onOpenChange:c,size:"lg",children:e.jsx(ke,{children:w=>e.jsxs(e.Fragment,{children:[e.jsx(Ie,{children:g?"Edit Product Group":"Add Product Group"}),e.jsx(Fe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{label:"Name",placeholder:"Enter group name",value:j.name,onChange:P=>N("name",P.target.value),errorMessage:S.name,isInvalid:!!S.name,isRequired:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Icon"}),e.jsx(Qt,{selectedIcon:j.icon,onIconSelect:O})]}),e.jsx(he,{label:"Description",placeholder:"Enter group description",value:j.description,onChange:P=>N("description",P.target.value),errorMessage:S.description,isInvalid:!!S.description,isRequired:!0,rows:3})]})}),e.jsxs(Oe,{children:[e.jsx(I,{variant:"light",onPress:w,children:"Cancel"}),e.jsxs(I,{color:"primary",onPress:E,children:[g?"Update":"Add"," Group"]})]})]})})})]})},sr=({tags:s,onTagsChange:a})=>{const[t,r]=G.useState(""),n=l=>{if(l.key==="Enter"&&t.trim()){l.preventDefault();const c=t.trim();s.includes(c)||a([...s,c]),r("")}},i=l=>{a(s.filter(c=>c!==l))};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{placeholder:"Type a tag and press Enter",value:t,onChange:l=>r(l.target.value),onKeyDown:n}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(l=>e.jsx(W,{onClose:()=>i(l),variant:"flat",size:"sm",children:l},l))})]})},tr=()=>{const{productRanges:s,productGroups:a,addProductRange:t,updateProductRange:r,removeProductRange:n,getProductsForRange:i,linkRangeToGroup:l,unlinkRangeFromGroup:c,relationships:p}=Q(),{isOpen:g,onOpen:h,onOpenChange:j,onClose:m}=_e(),[S,y]=G.useState(null),[D,z]=G.useState({name:"",image:"",description:"",tags:[]}),[T,N]=G.useState(new Set),[O,A]=G.useState({}),E=()=>{y(null),z({name:"",image:"",description:"",tags:[]}),N(new Set),A({}),h()},w=o=>{y(o),z({name:o.name,image:o.image,description:o.description,tags:[...o.tags]});const x=new Set;Object.entries(p.groupToRanges).forEach(([_,M])=>{M.includes(o.id)&&x.add(_)}),N(x),A({}),h()},P=o=>{const x=i(o).length,_=x>0?`Are you sure you want to delete this product range? This will also remove ${x} associated product(s).`:"Are you sure you want to delete this product range?";confirm(_)&&n(o)},b=(o,x)=>{z(_=>({..._,[o]:x})),O[o]&&A(_=>({..._,[o]:""}))},C=()=>{const o={};return D.name.trim()||(o.name="Name is required"),s.some(_=>_.name.toLowerCase()===D.name.toLowerCase()&&(!S||_.id!==S.id))&&(o.name="A product range with this name already exists"),D.description.trim()||(o.description="Description is required"),T.size===0&&(o.groups="Please select at least one product group"),A(o),Object.keys(o).length===0},d=()=>{if(!C())return;let o;S?(r(S.id,D),o=S.id,Object.keys(p.groupToRanges).forEach(x=>{c(x,S.id)})):(t(D),o=D.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),T.forEach(x=>{l(x,o)}),m()},v=()=>{const o={},x=[];return s.forEach(_=>{let M=!1;Object.entries(p.groupToRanges).forEach(([R,U])=>{if(U.includes(_.id)){const X=a.find(Ge=>Ge.id===R);X&&(o[X.name]||(o[X.name]=[]),o[X.name].push(_),M=!0)}}),M||x.push(_)}),{grouped:o,ungrouped:x}},{grouped:k,ungrouped:f}=v();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Product Ranges"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Define specific product lines within each group"})]}),e.jsx(I,{color:"primary",onPress:E,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),isDisabled:a.length===0,children:"Add Product Range"})]}),a.length===0?e.jsx(B,{children:e.jsx(L,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:alert-circle",width:48,className:"text-warning-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Groups Available"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"You need to create product groups first before adding ranges"})]})]})})}):s.length===0?e.jsx(B,{children:e.jsx(L,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Ranges Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create your first product range to organize your products"})]}),e.jsx(I,{color:"primary",onPress:E,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product Range"})]})})}):e.jsxs("div",{className:"space-y-6",children:[Object.entries(k).map(([o,x])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:layers",width:18}),o,e.jsxs(W,{size:"sm",variant:"flat",children:[x.length," range",x.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(_=>e.jsx(Ss,{range:_,onEdit:w,onDelete:P},_.id))})]},o)),f.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-warning-600",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:18}),"Ungrouped Ranges",e.jsxs(W,{size:"sm",variant:"flat",color:"warning",children:[f.length," range",f.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(o=>e.jsx(Ss,{range:o,onEdit:w,onDelete:P},o.id))})]})]}),e.jsx(De,{isOpen:g,onOpenChange:j,size:"2xl",children:e.jsx(ke,{children:o=>e.jsxs(e.Fragment,{children:[e.jsx(Ie,{children:S?"Edit Product Range":"Add Product Range"}),e.jsx(Fe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{label:"Name",placeholder:"Enter range name",value:D.name,onChange:x=>b("name",x.target.value),errorMessage:O.name,isInvalid:!!O.name,isRequired:!0}),e.jsx(Ne,{label:"Product Groups",placeholder:"Select product groups for this range",selectionMode:"multiple",selectedKeys:T,onSelectionChange:x=>N(x),errorMessage:O.groups,isInvalid:!!O.groups,isRequired:!0,children:a.map(x=>e.jsx(we,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:x.icon,width:16}),x.name]})},x.id))}),e.jsx(Z,{label:"Image URL",placeholder:"Enter image URL (optional)",value:D.image,onChange:x=>b("image",x.target.value)}),e.jsx(he,{label:"Description",placeholder:"Enter range description",value:D.description,onChange:x=>b("description",x.target.value),errorMessage:O.description,isInvalid:!!O.description,isRequired:!0,rows:3}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Tags"}),e.jsx(sr,{tags:D.tags,onTagsChange:x=>b("tags",x)})]})]})}),e.jsxs(Oe,{children:[e.jsx(I,{variant:"light",onPress:o,children:"Cancel"}),e.jsxs(I,{color:"primary",onPress:d,children:[S?"Update":"Add"," Range"]})]})]})})})]})},Ss=({range:s,onEdit:a,onDelete:t})=>{const{getProductsForRange:r}=Q(),n=r(s.id).length;return e.jsxs(B,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.image?e.jsx(Is,{src:s.image,alt:s.name,width:40,height:40,className:"rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-secondary-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{icon:"lucide:grid-3x3",width:20,className:"text-secondary-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:s.name}),e.jsxs(W,{size:"sm",variant:"flat",color:"secondary",children:[n," product",n!==1?"s":""]})]})]}),e.jsxs(ts,{children:[e.jsx(rs,{children:e.jsx(I,{isIconOnly:!0,variant:"light",size:"sm",children:e.jsx(u,{icon:"lucide:more-vertical",width:16})})}),e.jsxs(as,{"aria-label":"Range Actions",children:[e.jsx(ie,{startContent:e.jsx(u,{icon:"lucide:edit",width:16}),onPress:()=>a(s),children:"Edit"},"edit"),e.jsx(ie,{className:"text-danger",color:"danger",startContent:e.jsx(u,{icon:"lucide:trash",width:16}),onPress:()=>t(s.id),children:"Delete"},"delete")]})]})]})}),e.jsxs(L,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-foreground-600 mb-2",children:s.description}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.map(i=>e.jsx(W,{size:"sm",variant:"flat",color:"default",children:i},i))})]})]})},rr=({files:s,onFilesChange:a})=>{const[t,r]=G.useState(""),[n,i]=G.useState(""),l=()=>{t.trim()&&n.trim()&&(a({...s,[t.trim()]:n.trim()}),r(""),i(""))},c=p=>{const g={...s};delete g[p],a(g)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{placeholder:"File name",value:t,onChange:p=>r(p.target.value),size:"sm"}),e.jsx(Z,{placeholder:"File URL",value:n,onChange:p=>i(p.target.value),size:"sm"}),e.jsx(I,{size:"sm",color:"primary",onPress:l,isDisabled:!t.trim()||!n.trim(),children:"Add"})]}),Object.entries(s).length>0&&e.jsx("div",{className:"space-y-2",children:Object.entries(s).map(([p,g])=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:p}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:g})]}),e.jsx(I,{size:"sm",variant:"light",color:"danger",onPress:()=>c(p),children:"Remove"})]},p))})]})},ar=({specifications:s,onSpecificationsChange:a})=>{const[t,r]=G.useState(""),n=()=>{t.trim()&&!s.includes(t.trim())&&(a([...s,t.trim()]),r(""))},i=l=>{a(s.filter(c=>c!==l))};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{placeholder:"Add specification",value:t,onChange:l=>r(l.target.value),onKeyPress:l=>l.key==="Enter"&&n(),size:"sm"}),e.jsx(I,{size:"sm",color:"primary",onPress:n,isDisabled:!t.trim(),children:"Add"})]}),s.length>0&&e.jsx("div",{className:"space-y-2",children:s.map((l,c)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsx(I,{size:"sm",variant:"light",color:"danger",onPress:()=>i(l),children:"Remove"})]},c))})]})},nr=()=>{const{products:s,productRanges:a,addProduct:t,updateProduct:r,removeProduct:n,linkProductToRange:i,unlinkProductFromRange:l,relationships:c}=Q(),{isOpen:p,onOpen:g,onOpenChange:h,onClose:j}=_e(),[m,S]=G.useState(null),[y,D]=G.useState({code:"",name:"",overview:"",description:"",specifications:[],imageGallery:[],files:{}}),[z,T]=G.useState(new Set),[N,O]=G.useState({}),A=()=>{S(null),D({code:"",name:"",overview:"",description:"",specifications:[],imageGallery:[],files:{}}),T(new Set),O({}),g()},E=f=>{S(f),D({code:f.code,name:f.name,overview:f.overview,description:f.description,specifications:[...f.specifications],imageGallery:[...f.imageGallery],files:{...f.files}});const o=new Set;Object.entries(c.rangeToProducts).forEach(([x,_])=>{_.includes(f.id)&&o.add(x)}),T(o),O({}),g()},w=f=>{confirm("Are you sure you want to delete this product?")&&n(f)},P=(f,o)=>{if(D(x=>({...x,[f]:o})),f==="name"&&!y.code&&typeof o=="string"){const x=o.toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"");D(_=>({..._,code:x}))}N[f]&&O(x=>({...x,[f]:""}))},b=()=>{const f={};return y.code.trim()||(f.code="Product code is required"),s.some(x=>x.code.toLowerCase()===y.code.toLowerCase()&&(!m||x.id!==m.id))&&(f.code="A product with this code already exists"),y.name.trim()||(f.name="Product name is required"),y.overview.trim()||(f.overview="Product overview is required"),y.description.trim()||(f.description="Product description is required"),z.size===0&&(f.ranges="Please select at least one product range"),O(f),Object.keys(f).length===0},C=()=>{if(!b())return;let f;m?(r(m.id,y),f=m.id,Object.keys(c.rangeToProducts).forEach(o=>{l(o,m.id)})):(t(y),f=(y.code||y.name).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")),z.forEach(o=>{i(o,f)}),j()},d=()=>{const f={},o=[];return s.forEach(x=>{let _=!1;Object.entries(c.rangeToProducts).forEach(([M,R])=>{if(R.includes(x.id)){const U=a.find(X=>X.id===M);U&&(f[U.name]||(f[U.name]=[]),f[U.name].push(x),_=!0)}}),_||o.push(x)}),{grouped:f,ungrouped:o}},{grouped:v,ungrouped:k}=d();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Products"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Manage individual products with detailed specifications"})]}),e.jsx(I,{color:"primary",onPress:A,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),isDisabled:a.length===0,children:"Add Product"})]}),a.length===0?e.jsx(B,{children:e.jsx(L,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:alert-circle",width:48,className:"text-warning-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Product Ranges Available"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"You need to create product ranges first before adding products"})]})]})})}):s.length===0?e.jsx(B,{children:e.jsx(L,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:package",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Products Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create your first product to get started"})]}),e.jsx(I,{color:"primary",onPress:A,startContent:e.jsx(u,{icon:"lucide:plus",width:18}),children:"Add Product"})]})})}):e.jsxs("div",{className:"space-y-6",children:[Object.entries(v).map(([f,o])=>e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:18}),f,e.jsxs(W,{size:"sm",variant:"flat",children:[o.length," product",o.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(x=>e.jsx(_s,{product:x,onEdit:E,onDelete:w},x.id))})]},f)),k.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2 text-warning-600",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:18}),"Ungrouped Products",e.jsxs(W,{size:"sm",variant:"flat",color:"warning",children:[k.length," product",k.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(f=>e.jsx(_s,{product:f,onEdit:E,onDelete:w},f.id))})]})]}),e.jsx(De,{isOpen:p,onOpenChange:h,size:"3xl",scrollBehavior:"inside",children:e.jsx(ke,{children:f=>e.jsxs(e.Fragment,{children:[e.jsx(Ie,{children:m?"Edit Product":"Add Product"}),e.jsx(Fe,{children:e.jsxs(Ee,{"aria-label":"Product Details",defaultSelectedKey:"basic",children:[e.jsx(V,{title:"Basic Info",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Z,{label:"Product Code",placeholder:"e.g., SH-PEN-001",value:y.code,onChange:o=>P("code",o.target.value),errorMessage:N.code,isInvalid:!!N.code,isRequired:!0}),e.jsx(Z,{label:"Product Name",placeholder:"Enter product name",value:y.name,onChange:o=>P("name",o.target.value),errorMessage:N.name,isInvalid:!!N.name,isRequired:!0})]}),e.jsx(Ne,{label:"Product Ranges",placeholder:"Select product ranges",selectionMode:"multiple",selectedKeys:z,onSelectionChange:o=>T(o),errorMessage:N.ranges,isInvalid:!!N.ranges,isRequired:!0,children:a.map(o=>e.jsx(we,{children:o.name},o.id))}),e.jsx(he,{label:"Overview",placeholder:"Brief product overview",value:y.overview,onChange:o=>P("overview",o.target.value),errorMessage:N.overview,isInvalid:!!N.overview,isRequired:!0,rows:2}),e.jsx(he,{label:"Description",placeholder:"Detailed product description",value:y.description,onChange:o=>P("description",o.target.value),errorMessage:N.description,isInvalid:!!N.description,isRequired:!0,rows:4})]})},"basic"),e.jsx(V,{title:"Specifications",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Product Specifications"}),e.jsx(ar,{specifications:y.specifications,onSpecificationsChange:o=>P("specifications",o)})]})})},"specifications"),e.jsx(V,{title:"Files & Images",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Image Gallery (URLs)"}),e.jsxs("div",{className:"space-y-2",children:[y.imageGallery.map((o,x)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{placeholder:"Image URL",value:o,onChange:_=>{const M=[...y.imageGallery];M[x]=_.target.value,P("imageGallery",M)},size:"sm"}),e.jsx(I,{size:"sm",variant:"light",color:"danger",onPress:()=>{const _=y.imageGallery.filter((M,R)=>R!==x);P("imageGallery",_)},children:"Remove"})]},x)),e.jsx(I,{size:"sm",variant:"flat",onPress:()=>P("imageGallery",[...y.imageGallery,""]),children:"Add Image"})]})]}),e.jsx(gt,{}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground-700 mb-2 block",children:"Product Files"}),e.jsx(rr,{files:y.files,onFilesChange:o=>P("files",o)})]})]})},"files")]})}),e.jsxs(Oe,{children:[e.jsx(I,{variant:"light",onPress:f,children:"Cancel"}),e.jsxs(I,{color:"primary",onPress:C,children:[m?"Update":"Add"," Product"]})]})]})})})]})},_s=({product:s,onEdit:a,onDelete:t})=>{const r=s.imageGallery.length>0&&s.imageGallery[0];return e.jsxs(B,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r?e.jsx(Is,{src:s.imageGallery[0],alt:s.name,width:40,height:40,className:"rounded-lg object-cover"}):e.jsx("div",{className:"w-10 h-10 bg-success-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{icon:"lucide:package",width:20,className:"text-success-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:s.name}),e.jsx(W,{size:"sm",variant:"flat",color:"success",children:s.code})]})]}),e.jsxs(ts,{children:[e.jsx(rs,{children:e.jsx(I,{isIconOnly:!0,variant:"light",size:"sm",children:e.jsx(u,{icon:"lucide:more-vertical",width:16})})}),e.jsxs(as,{"aria-label":"Product Actions",children:[e.jsx(ie,{startContent:e.jsx(u,{icon:"lucide:edit",width:16}),onPress:()=>a(s),children:"Edit"},"edit"),e.jsx(ie,{className:"text-danger",color:"danger",startContent:e.jsx(u,{icon:"lucide:trash",width:16}),onPress:()=>t(s.id),children:"Delete"},"delete")]})]})]})}),e.jsxs(L,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-foreground-600 mb-2",children:s.overview}),s.specifications.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-foreground-700",children:"Specifications:"}),e.jsxs("div",{className:"text-xs text-foreground-500",children:[s.specifications.slice(0,3).map((n,i)=>e.jsxs("div",{children:["• ",n]},i)),s.specifications.length>3&&e.jsxs("div",{children:["... and ",s.specifications.length-3," more"]})]})]})]})]})},ir=()=>{const{productGroups:s,productRanges:a,products:t,relationships:r,linkRangeToGroup:n,unlinkRangeFromGroup:i,linkProductToRange:l,unlinkProductFromRange:c}=Q(),[p,g]=G.useState(null),[h,j]=G.useState(null),[m,S]=G.useState(!1),y=()=>s.map(d=>{const v=r.groupToRanges[d.id]||[],k=v.map(f=>{const o=a.find(M=>M.id===f),x=r.rangeToProducts[f]||[],_=x.map(M=>{const R=t.find(U=>U.id===M);return{id:M,name:(R==null?void 0:R.name)||"Unknown Product",code:R==null?void 0:R.code,overview:R==null?void 0:R.overview,type:"product",hasIssues:!R}}).filter(Boolean);return{id:f,name:(o==null?void 0:o.name)||"Unknown Range",description:o==null?void 0:o.description,type:"range",children:_,hasIssues:!o||x.length===0}}).filter(Boolean);return{id:d.id,name:d.name,description:d.description,type:"group",children:k,hasIssues:v.length===0}}),D=()=>{const d=a.filter(k=>!Object.values(r.groupToRanges).some(f=>f.includes(k.id))),v=t.filter(k=>!Object.values(r.rangeToProducts).some(f=>f.includes(k.id)));return{orphanedRanges:d,orphanedProducts:v}},z=()=>{const{orphanedRanges:d,orphanedProducts:v}=D(),k=Object.values(r.groupToRanges).reduce((o,x)=>o+x.length,0)+Object.values(r.rangeToProducts).reduce((o,x)=>o+x.length,0),f=Math.round((s.length-s.filter(o=>(r.groupToRanges[o.id]||[]).length===0).length+(a.length-d.length)+(t.length-v.length))/(s.length+a.length+t.length)*100);return{totalConnections:k,orphanedRanges:d.length,orphanedProducts:v.length,completionRate:isNaN(f)?0:f}},T=(d,v)=>{n(d,v)},N=(d,v)=>{i(d,v)},O=(d,v)=>{l(d,v)},A=(d,v)=>{c(d,v)},E=async()=>{S(!0),await new Promise(d=>setTimeout(d,1500)),S(!1)},w=y(),{orphanedRanges:P,orphanedProducts:b}=D(),C=z();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Relationship Manager"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Manage connections between groups, ranges, and products"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(I,{color:"secondary",variant:"flat",onPress:E,startContent:e.jsx(u,{icon:"lucide:search",width:18}),isLoading:m,children:m?"Analyzing...":"Analyze Structure"})})]}),e.jsx(B,{className:"mb-6",children:e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:C.totalConnections}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Total Connections"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-warning-600",children:C.orphanedRanges}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Orphaned Ranges"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-danger-600",children:C.orphanedProducts}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Orphaned Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-success-600",children:[C.completionRate,"%"]}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Structure Complete"}),e.jsx(Gt,{value:C.completionRate,color:C.completionRate>80?"success":C.completionRate>50?"warning":"danger",size:"sm",className:"mt-1"})]})]})})}),e.jsxs(Ee,{"aria-label":"Relationship Views",defaultSelectedKey:"tree",children:[e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:git-branch",width:16}),"Tree View"]}),children:e.jsxs("div",{className:"space-y-4",children:[w.length===0?e.jsx(B,{children:e.jsx(L,{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{icon:"lucide:git-branch",width:48,className:"text-foreground-300"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground-600",children:"No Structure Yet"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create groups, ranges, and products to see the relationship tree"})]})]})})}):e.jsx(Fs,{selectionMode:"multiple",variant:"bordered",children:w.map(d=>{var v;return e.jsx(Os,{title:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{icon:e.jsx(u,{icon:"lucide:folder",width:16}),className:"w-6 h-6 bg-primary-100 text-primary-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:d.name}),d.hasIssues&&e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-500"})]}),e.jsx("div",{className:"text-xs text-foreground-500",children:d.description||"No description"})]}),e.jsx(us,{content:((v=d.children)==null?void 0:v.length)||0,color:"primary",size:"sm",children:e.jsx("div",{className:"w-4 h-4"})})]}),children:d.children&&d.children.length>0?e.jsx("div",{className:"space-y-3 pl-4",children:d.children.map(k=>{var f;return e.jsxs("div",{className:"border-l-2 border-gray-200 pl-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ne,{icon:e.jsx(u,{icon:"lucide:grid-3x3",width:16}),className:"w-6 h-6 bg-secondary-100 text-secondary-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:k.name}),k.hasIssues&&e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-500"})]}),e.jsx("div",{className:"text-xs text-foreground-500",children:k.description||"No description"})]}),e.jsx(us,{content:((f=k.children)==null?void 0:f.length)||0,color:"secondary",size:"sm",children:e.jsx("div",{className:"w-4 h-4"})})]}),k.children&&k.children.length>0&&e.jsx("div",{className:"space-y-2 pl-8",children:k.children.map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx(ne,{icon:e.jsx(u,{icon:"lucide:package",width:16}),className:"w-5 h-5 bg-success-100 text-success-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:o.name}),o.code&&e.jsx(W,{size:"sm",variant:"flat",color:"success",children:o.code}),o.hasIssues&&e.jsx(u,{icon:"lucide:alert-triangle",width:14,className:"text-warning-500"})]}),o.overview&&e.jsx("div",{className:"text-xs text-foreground-500",children:o.overview})]})]},o.id))})]},k.id)})}):e.jsxs("div",{className:"text-center py-6 text-foreground-400",children:[e.jsx(u,{icon:"lucide:inbox",width:32,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"No ranges linked to this group"})]})},d.id)})}),(P.length>0||b.length>0)&&e.jsxs(B,{className:"border-warning-200 bg-warning-50",children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-2 text-warning-700",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:20}),e.jsx("h4",{className:"font-semibold",children:"Orphaned Items"})]})}),e.jsxs(L,{className:"pt-0",children:[P.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Unlinked Ranges:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:P.map(d=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:16,className:"text-secondary-600"}),e.jsx("span",{className:"text-sm",children:d.name}),e.jsx("span",{className:"text-xs text-gray-500",children:d.description})]},d.id))})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Unlinked Products:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b.map(d=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border",children:[e.jsx(u,{icon:"lucide:package",width:16,className:"text-success-600"}),e.jsx("span",{className:"text-sm",children:d.name}),e.jsx(W,{size:"sm",variant:"flat",color:"success",children:d.code})]},d.id))})]})]})]})]})},"tree"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:link",width:16}),"Manage Links"]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(B,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:arrow-right",width:16}),"Group → Range Links"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ne,{label:"Select Group",placeholder:"Choose a product group",selectedKeys:p?new Set([p]):new Set,onSelectionChange:d=>g(Array.from(d)[0]||null),children:s.map(d=>e.jsx(we,{children:d.name},d.id))}),p&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground-700",children:"Available Ranges:"}),a.map(d=>{const v=(r.groupToRanges[p]||[]).includes(d.id);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:16,className:"text-secondary-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:d.name}),e.jsx("div",{className:"text-xs text-foreground-500",children:d.description})]})]}),e.jsx(I,{size:"sm",color:v?"danger":"primary",variant:v?"flat":"solid",onPress:()=>{v?N(p,d.id):T(p,d.id)},children:v?"Unlink":"Link"})]},d.id)})]})]})})]}),e.jsxs(B,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:arrow-right",width:16}),"Range → Product Links"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ne,{label:"Select Range",placeholder:"Choose a product range",selectedKeys:h?new Set([h]):new Set,onSelectionChange:d=>j(Array.from(d)[0]||null),children:a.map(d=>e.jsx(we,{children:d.name},d.id))}),h&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground-700",children:"Available Products:"}),t.map(d=>{const v=(r.rangeToProducts[h]||[]).includes(d.id);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{icon:"lucide:package",width:16,className:"text-success-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:d.name}),e.jsx("div",{className:"text-xs text-foreground-500",children:d.code})]})]}),e.jsx(I,{size:"sm",color:v?"danger":"primary",variant:v?"flat":"solid",onPress:()=>{v?A(h,d.id):O(h,d.id)},children:v?"Unlink":"Link"})]},d.id)})]})]})})]})]})},"manage"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:bar-chart-3",width:16}),"Analysis"]}),children:e.jsx("div",{className:"space-y-6",children:m?e.jsx(B,{children:e.jsxs(L,{className:"text-center py-12",children:[e.jsx(ks,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-foreground-600",children:"Analyzing relationship structure..."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsx(K,{children:e.jsx("h4",{className:"font-semibold",children:"Structure Analysis"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Groups"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Groups"}),e.jsx("span",{className:"text-sm font-medium",children:s.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"With Ranges"}),e.jsx("span",{className:"text-sm font-medium",children:s.filter(d=>(r.groupToRanges[d.id]||[]).length>0).length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Empty Groups"}),e.jsx("span",{className:"text-sm font-medium text-warning-600",children:s.filter(d=>(r.groupToRanges[d.id]||[]).length===0).length})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Ranges"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Ranges"}),e.jsx("span",{className:"text-sm font-medium",children:a.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Linked to Groups"}),e.jsx("span",{className:"text-sm font-medium",children:a.length-P.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"With Products"}),e.jsx("span",{className:"text-sm font-medium",children:a.filter(d=>(r.rangeToProducts[d.id]||[]).length>0).length})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Products"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Products"}),e.jsx("span",{className:"text-sm font-medium",children:t.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Linked to Ranges"}),e.jsx("span",{className:"text-sm font-medium",children:t.length-b.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Orphaned"}),e.jsx("span",{className:"text-sm font-medium text-danger-600",children:b.length})]})]})]})]})})]}),e.jsxs(B,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:lightbulb",width:16}),"Recommendations"]})}),e.jsx(L,{children:e.jsxs("div",{className:"space-y-3",children:[C.orphanedProducts>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-danger-50 rounded-lg border border-danger-200",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-danger-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-danger-800",children:["You have ",C.orphanedProducts," unlinked product",C.orphanedProducts!==1?"s":""]}),e.jsx("p",{className:"text-xs text-danger-600",children:"Link these products to ranges so they appear in your product stepper."})]})]}),C.orphanedRanges>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-warning-50 rounded-lg border border-warning-200",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-warning-800",children:["You have ",C.orphanedRanges," unlinked range",C.orphanedRanges!==1?"s":""]}),e.jsx("p",{className:"text-xs text-warning-600",children:"Link these ranges to product groups to organize your structure."})]})]}),s.filter(d=>(r.groupToRanges[d.id]||[]).length===0).length>0&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-primary-50 rounded-lg border border-primary-200",children:[e.jsx(u,{icon:"lucide:info",width:16,className:"text-primary-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-800",children:"Some product groups are empty"}),e.jsx("p",{className:"text-xs text-primary-600",children:"Consider linking ranges to these groups or removing unused groups."})]})]}),C.completionRate>=90&&e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-success-50 rounded-lg border border-success-200",children:[e.jsx(u,{icon:"lucide:check-circle",width:16,className:"text-success-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-success-800",children:"Great job! Your structure is well organized"}),e.jsx("p",{className:"text-xs text-success-600",children:"Your data structure is ready for the product stepper."})]})]})]})})]})]})})},"analysis")]})]})},lr=()=>{const{productGroups:s,productRanges:a,products:t,relationships:r,exportData:n,importData:i}=Q(),{isOpen:l,onOpen:c,onOpenChange:p,onClose:g}=_e(),[h,j]=G.useState(""),[m,S]=G.useState(""),[y,D]=G.useState("structure"),z=()=>({stepperForm:{steps:s.map((C,d)=>{const v=r.groupToRanges[C.id]||[],k=v.map(o=>{const x=a.find(_=>_.id===o);return(x==null?void 0:x.name)||"Unknown Range"}),f={};return v.forEach(o=>{const x=a.find(_=>_.id===o);if(x){const _=r.rangeToProducts[o]||[];f[x.name]=_.map(M=>{const R=t.find(U=>U.id===M);return{id:(R==null?void 0:R.id)||M,code:(R==null?void 0:R.code)||"",name:(R==null?void 0:R.name)||"Unknown Product",overview:(R==null?void 0:R.overview)||"",description:(R==null?void 0:R.description)||"",specifications:(R==null?void 0:R.specifications)||[],imageGallery:(R==null?void 0:R.imageGallery)||[],files:(R==null?void 0:R.files)||{}}})}}),{step:d+1,title:C.name,categories:k.length>0?k:void 0,products:f}})}}),T=()=>{const b=n();S(JSON.stringify(b,null,2)),D("json")},N=()=>{try{const b=JSON.parse(h);i(b),j(""),g()}catch{alert("Invalid JSON format. Please check your data.")}},O=()=>{const b=z(),C=JSON.stringify(b,null,2),d="data:application/json;charset=utf-8,"+encodeURIComponent(C),v="stepper-config.json",k=document.createElement("a");k.setAttribute("href",d),k.setAttribute("download",v),k.click()},A=()=>{const b=z();navigator.clipboard.writeText(JSON.stringify(b,null,2))},E=z(),w={};E.stepperForm.steps.forEach(b=>{b.products&&Object.entries(b.products).forEach(([C,d])=>{w[C]||(w[C]=[]),w[C].push(...d)})});const P={totalSteps:E.stepperForm.steps.length,totalCategories:Object.keys(w).length,totalProducts:Object.values(w).reduce((b,C)=>b+C.length,0),hasIssues:E.stepperForm.steps.some(b=>!b.categories||b.categories.length===0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Data Preview"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Preview and export your stepper configuration"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"flat",onPress:c,startContent:e.jsx(u,{icon:"lucide:upload",width:18}),children:"Import"}),e.jsx(I,{color:"secondary",onPress:T,startContent:e.jsx(u,{icon:"lucide:download",width:18}),children:"Export Data"}),e.jsx(I,{color:"primary",onPress:O,startContent:e.jsx(u,{icon:"lucide:file-down",width:18}),children:"Download Config"})]})]}),e.jsx(B,{className:"mb-6",children:e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-600",children:P.totalSteps}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Stepper Steps"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-secondary-600",children:P.totalCategories}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Categories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-success-600",children:P.totalProducts}),e.jsx("div",{className:"text-sm text-foreground-500",children:"Products"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${P.hasIssues?"text-warning-600":"text-success-600"}`,children:P.hasIssues?e.jsx(u,{icon:"lucide:alert-triangle",width:32}):e.jsx(u,{icon:"lucide:check-circle",width:32})}),e.jsx("div",{className:"text-sm text-foreground-500",children:P.hasIssues?"Has Issues":"Ready"})]})]})})}),e.jsxs(Ee,{"aria-label":"Preview Options",selectedKey:y,onSelectionChange:b=>D(b),children:[e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:layers",width:16}),"Structure Preview"]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:list",width:16}),"Stepper Steps"]})}),e.jsx(L,{children:E.stepperForm.steps.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{icon:"lucide:layers",width:48,className:"mx-auto text-foreground-300 mb-4"}),e.jsx("p",{className:"text-foreground-600",children:"No stepper steps configured"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Create product groups to generate stepper steps"})]}):e.jsx("div",{className:"space-y-4",children:E.stepperForm.steps.map(b=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-primary-600",children:b.step})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-semibold",children:b.title}),b.categories&&b.categories.length>0?e.jsx("div",{className:"flex gap-1 mt-1",children:b.categories.map((C,d)=>e.jsx(W,{size:"sm",variant:"flat",color:"secondary",children:C},d))}):e.jsxs("p",{className:"text-sm text-warning-600 mt-1",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:14,className:"inline mr-1"}),"No categories linked"]})]})]},b.step))})})]}),e.jsxs(B,{children:[e.jsx(K,{children:e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:package",width:16}),"Products by Category"]})}),e.jsx(L,{children:Object.keys(w).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{icon:"lucide:package",width:48,className:"mx-auto text-foreground-300 mb-4"}),e.jsx("p",{className:"text-foreground-600",children:"No products configured"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"Link products to ranges to see them here"})]}):e.jsx(Fs,{variant:"bordered",children:Object.entries(w).map(([b,C])=>e.jsx(Os,{title:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{icon:e.jsx(u,{icon:"lucide:grid-3x3",width:16}),className:"w-6 h-6 bg-secondary-100 text-secondary-600"}),e.jsx("span",{className:"font-medium",children:b}),e.jsxs(W,{size:"sm",variant:"flat",color:"secondary",children:[C.length," product",C.length!==1?"s":""]})]}),children:e.jsx("div",{className:"space-y-3 pl-4",children:C.map(d=>e.jsx("div",{className:"border-l-2 border-success-200 pl-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ne,{icon:e.jsx(u,{icon:"lucide:package",width:16}),className:"w-8 h-8 bg-success-100 text-success-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h6",{className:"font-semibold",children:d.name}),e.jsx(W,{size:"sm",variant:"flat",color:"success",children:d.code})]}),e.jsx("p",{className:"text-sm text-foreground-600 mb-2",children:d.overview}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-foreground-700",children:"Specifications:"}),e.jsx("span",{className:"text-foreground-500 ml-1",children:d.specifications.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-foreground-700",children:"Images:"}),e.jsx("span",{className:"text-foreground-500 ml-1",children:d.imageGallery.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-foreground-700",children:"Files:"}),e.jsx("span",{className:"text-foreground-500 ml-1",children:Object.keys(d.files).length})]})]})]})]})},d.id))})},b))})})]})]})},"structure"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:code",width:16}),"JSON Preview"]}),children:e.jsxs(B,{children:[e.jsxs(K,{className:"flex flex-row justify-between items-center",children:[e.jsx("h4",{className:"font-semibold",children:"Configuration JSON"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{size:"sm",variant:"flat",onPress:A,startContent:e.jsx(u,{icon:"lucide:copy",width:16}),children:"Copy"}),e.jsx(I,{size:"sm",color:"primary",onPress:O,startContent:e.jsx(u,{icon:"lucide:download",width:16}),children:"Download"})]})]}),e.jsx(L,{children:e.jsx(Tt,{className:"w-full max-h-96 overflow-auto text-xs",children:m||JSON.stringify(E,null,2)})})]})},"json")]}),e.jsx(De,{isOpen:l,onOpenChange:p,size:"2xl",children:e.jsx(ke,{children:b=>e.jsxs(e.Fragment,{children:[e.jsx(Ie,{children:"Import Configuration"}),e.jsx(Fe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-warning-50 border border-warning-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(u,{icon:"lucide:alert-triangle",width:16,className:"text-warning-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-warning-800",children:"Warning"}),e.jsx("p",{className:"text-xs text-warning-600",children:"Importing will replace all current data. Make sure to export your current configuration first if needed."})]})]})}),e.jsx(he,{label:"JSON Data",placeholder:"Paste your exported JSON configuration here...",value:h,onChange:C=>j(C.target.value),rows:12,className:"font-mono text-sm"})]})}),e.jsxs(Oe,{children:[e.jsx(I,{variant:"light",onPress:b,children:"Cancel"}),e.jsx(I,{color:"primary",onPress:N,isDisabled:!h.trim(),children:"Import"})]})]})})})]})},or=()=>{const{productGroups:s,productRanges:a,products:t,relationships:r,exportData:n,importData:i,error:l}=Q(),c=()=>{const g=n(),h="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(g,null,2)),j=document.createElement("a");j.setAttribute("href",h),j.setAttribute("download","product-configurator-data.json"),document.body.appendChild(j),j.click(),j.remove()},p=g=>{var m;const h=(m=g.target.files)==null?void 0:m[0];if(!h)return;const j=new FileReader;j.onload=S=>{var y;try{const D=JSON.parse((y=S.target)==null?void 0:y.result);i(D),g.target.value=""}catch(D){console.error("Error parsing imported data:",D),alert("Invalid data format. Please check your JSON file.")}},j.readAsText(h)};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Data Management ()"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-1",children:"Manage product groups, ranges, products, and their relationships"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{color:"primary",variant:"flat",onPress:c,startContent:e.jsx(u,{icon:"lucide:download",width:18}),children:"Export Data"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(I,{color:"primary",variant:"flat",as:"span",startContent:e.jsx(u,{icon:"lucide:upload",width:18}),children:"Import Data"}),e.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:p})]})]})]}),e.jsx(B,{className:"p-0",children:e.jsxs(Ee,{"aria-label":"Data Builder Tabs",fullWidth:!0,classNames:{tabList:"gap-0"},children:[e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:layers",width:18}),e.jsx("span",{children:"Product Groups"}),e.jsx("span",{className:"text-xs bg-primary-100 text-primary-800 px-2 py-0.5 rounded-full",children:s.length})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(er,{})})},"groups"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:grid-3x3",width:18}),e.jsx("span",{children:"Product Ranges"}),e.jsx("span",{className:"text-xs bg-secondary-100 text-secondary-800 px-2 py-0.5 rounded-full",children:a.length})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(tr,{})})},"ranges"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:package",width:18}),e.jsx("span",{children:"Products"}),e.jsx("span",{className:"text-xs bg-success-100 text-success-800 px-2 py-0.5 rounded-full",children:t.length})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(nr,{})})},"products"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:link",width:18}),e.jsx("span",{children:"Relationships"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(ir,{})})},"relationships"),e.jsx(V,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{icon:"lucide:eye",width:18}),e.jsx("span",{children:"Data Preview"})]}),children:e.jsx("div",{className:"p-6",children:e.jsx(lr,{})})},"preview")]})})]})};function cr(){const{productGroups:s,isDirty:a,isSaving:t,isLoading:r,error:n,lastSaved:i,initializeFromProductData:l,saveData:c,loadData:p,clearError:g}=Q();G.useEffect(()=>{s.length===0&&l(Pt)},[s.length,l]);const h=async()=>{try{g(),await c()}catch(m){console.error("Save failed:",m)}},j=async()=>{try{g(),await p()}catch(m){console.error("Load failed:",m)}};return r?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(ks,{size:"lg"}),e.jsx("p",{className:"text-foreground-600",children:"Loading product data..."})]})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"py-6 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Product Data Builder"}),e.jsx("p",{className:"text-foreground-500 mt-2",children:"Create and manage product configuration data"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsxs("div",{className:"text-sm text-foreground-500 text-right",children:[e.jsx("div",{children:"Last saved:"}),e.jsx("div",{className:"font-medium",children:new Date(i).toLocaleString()})]}),e.jsx(I,{variant:"flat",color:"primary",startContent:e.jsx(u,{icon:"lucide:refresh-cw",width:18}),onPress:j,isLoading:r,children:"Refresh Data"}),a&&e.jsx(I,{color:"primary",startContent:e.jsx(u,{icon:"lucide:save",width:18}),onPress:h,isLoading:t,isDisabled:t,children:t?"Saving...":"Save Changes"})]})]}),n&&e.jsx(fs,{color:"danger",variant:"flat",className:"mb-6",title:"Error",description:n,endContent:e.jsx(I,{variant:"light",color:"danger",size:"sm",onPress:g,children:"Dismiss"})}),a&&!n&&e.jsx(fs,{color:"warning",variant:"flat",className:"mb-6",title:"Unsaved Changes",description:"You have unsaved changes. Don't forget to save your work!"}),e.jsx(or,{})]})})}ft.createRoot(document.getElementById("urbana-data-builder-root")).render(e.jsx(G.StrictMode,{children:e.jsxs(jt,{children:[e.jsx(Ct,{}),e.jsx("main",{className:"text-foreground bg-background",children:e.jsx(cr,{})})]})}));
