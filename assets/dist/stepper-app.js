import{f as H,u as V,a as K,c as Y,j as e,b as E,I as g,R as I,r as b,d as N,e as S,s as J,l as Q,i as M,g as X,h as Z}from"./iconify.js";import{m as j}from"./proxy.js";import{c as ee,t as z,a as k}from"./chunk-ML27DD5T.js";import{i as D,a as se,b as F,p as _,c as A,T as te}from"./productData.js";import{t as ae,c as ie,a as ne,d as re,p as le,H as ce}from"./middleware.js";import"./features-animation.js";var B=H((t,a)=>{var s;const{as:r,className:d,children:l,...n}=t,i=r||"div",p=V(a),{slots:f,classNames:m}=K(),v=Y(m==null?void 0:m.footer,d);return e.jsx(i,{ref:p,className:(s=f.footer)==null?void 0:s.call(f,{class:v}),...n,children:l})});B.displayName="HeroUI.CardFooter";var oe=B;const de=({currentStep:t,totalSteps:a,onNext:s,onPrevious:r,canProceed:d,isLastStep:l,isSubmitting:n,isSubmitted:i,onSubmit:p})=>e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx("div",{children:t>1&&e.jsx(E,{variant:"flat",color:"default",onPress:r,startContent:e.jsx(g,{icon:"lucide:arrow-left",width:18}),children:"Previous"})}),e.jsxs("div",{className:"text-default-500 text-sm",children:["Step ",t," of ",a]}),e.jsx("div",{children:l?e.jsx(E,{color:"primary",isDisabled:!d||n||i,isLoading:n,onPress:p,endContent:!n&&!i&&e.jsx(g,{icon:"lucide:send",width:18}),children:i?e.jsxs(j.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check",width:18}),"Submitted"]}):"Submit"}):e.jsx(E,{color:"primary",isDisabled:!d,onPress:s,endContent:e.jsx(g,{icon:"lucide:arrow-right",width:18}),children:"Next"})})]}),ue=({currentStep:t,totalSteps:a,steps:s,selections:r,onStepClick:d})=>{const l=n=>n===1?!0:n===2?!!r.productGroup:n===3?!!r.productRange:n===4||n===5||n===6?!!r.individualProduct:!1;return e.jsx("div",{className:"hidden md:block mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:s.map(n=>{const i=n.step===t,p=n.step<t,f=l(n.step);return e.jsxs(I.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center relative",children:[e.jsx("button",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${i?"bg-primary text-white":p?"bg-success text-white":"bg-default-100 text-default-500"} ${f?"cursor-pointer hover:opacity-80":"cursor-not-allowed opacity-60"}`,onClick:()=>f&&d(n.step),disabled:!f,"aria-label":`Go to step ${n.step}: ${n.title}`,children:p?e.jsx(g,{icon:"lucide:check",width:20}):e.jsx("span",{children:n.step})}),e.jsx("span",{className:`text-xs mt-2 text-center max-w-[80px] ${i?"text-primary font-medium":"text-default-500"}`,children:n.title})]}),n.step<a&&e.jsx("div",{className:"flex-1 h-[2px] mx-2 bg-default-200",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:p?"100%":"0%"}})})]},n.step)})})})},me=({data:t,selection:a,onSelect:s})=>{const r=b.useMemo(()=>{var n;return t.productGroups&&Array.isArray(t.productGroups)?t.productGroups.filter(i=>i.active!==!1):((n=t.categories)==null?void 0:n.map(i=>({id:i.toLowerCase().replace(/\s+/g,"-"),name:i,icon:pe(i),description:he(i),active:!0})))||[]},[t.productGroups,t.categories]),d={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},l={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsx("p",{className:"text-default-600 mb-6",children:"Please select a product category to begin your configuration."}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:d,initial:"hidden",animate:"show",children:r.map(n=>e.jsx(j.div,{variants:l,children:e.jsx(N,{isPressable:!0,onPress:()=>s(n.name),className:`transition-all duration-200 ${a===n.name?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsxs(S,{className:"flex flex-col items-center text-center p-6",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-3 ${a===n.name?"bg-primary text-white":"bg-default-100 text-default-500"}`,children:e.jsx(g,{icon:n.icon,width:24})}),e.jsx("h3",{className:"text-lg font-medium",children:n.name}),e.jsx("p",{className:"text-default-500 text-sm mt-1",children:n.description})]})})},n.id))})]})};function pe(t){return{Shelter:"lucide:home",Toilet:"lucide:bath",Bridge:"lucide:route",Access:"lucide:wheelchair",Seating:"lucide:armchair",Lighting:"lucide:lamp"}[t]||"lucide:box"}function he(t){return{Shelter:"Outdoor structures for shade and protection",Toilet:"Public and portable sanitation facilities",Bridge:"Pedestrian and light vehicle crossings",Access:"Ramps, stairs, and accessibility solutions",Seating:"Benches and outdoor furniture options",Lighting:"Outdoor and pathway lighting solutions"}[t]||"Product category"}const fe=({data:t,productGroup:a,selection:s,onSelect:r})=>{t.ranges[a];const d=b.useMemo(()=>{var p,f;if(t.productRanges&&t.relationships){const m=a.toLowerCase().replace(/\s+/g,"-"),v=((p=t.relationships.groupToRanges)==null?void 0:p[m])||[];return t.productRanges.filter(P=>v.includes(P.id)&&P.active!==!1)}return(((f=t.ranges)==null?void 0:f[a])||[]).map(m=>({id:m.toLowerCase().replace(/\s+/g,"-"),name:m,image:"",description:xe(m),tags:ge(m),active:!0}))},[t.productRanges,t.relationships,t.ranges,a]),l={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a product range from the ",a," category:"]}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",variants:l,initial:"hidden",animate:"show",children:d.map((i,p)=>{const f=s===i.name;return e.jsx(j.div,{variants:n,children:e.jsx(N,{isPressable:!0,onPress:()=>r(i.name),className:`transition-all duration-200 ${f?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:e.jsx(S,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row",children:[i.image&&e.jsx(ee,{className:"p-0",children:e.jsx(D,{src:i.image,alt:i.name,className:"w-full h-40 object-cover",radius:"none"})}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:i.name}),e.jsx("p",{className:"text-default-500 text-sm mt-2",children:i.description}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:i.tags.map(m=>e.jsx("span",{className:"text-xs px-2 py-1 bg-default-100 text-default-700 rounded-medium",children:m},m))})]})]})})})},i.id)})})]})};function xe(t){return{Peninsula:"Modern shelters with excellent weather protection for parks and urban settings",Whyalla:"Robust shelters designed for coastal and high-wind environments",Coastal:"Corrosion-resistant designs perfect for beachfront and marine locations",Urban:"Contemporary designs that blend with modern city landscapes",Heritage:"Traditional designs that complement historic and cultural settings",EcoSan:"Environmentally friendly composting toilet solutions with minimal water usage",Standard:"Reliable and cost-effective public toilet facilities",Accessible:"Fully compliant accessible toilet facilities with enhanced features",Premium:"High-end toilet facilities with superior finishes and amenities",Compact:"Space-saving designs for areas with limited footprint","Small Span":"Compact bridges for garden paths and small water crossings","Large Span":"Extended bridges for wider crossings and heavier loads",Pedestrian:"Dedicated walkways designed for high foot traffic areas","Decorative Bridge":"Ornamental bridges that serve as landscape features","Heavy Duty":"Reinforced bridges capable of supporting maintenance vehicles",Ramp:"Gentle slope access solutions for wheelchairs and strollers",Staircase:"Step access with various configurations and safety features",Pathway:"Connected walkway systems for parks and public spaces",Boardwalk:"Elevated walkways for wetlands and sensitive environments",Platform:"Viewing platforms and elevated observation areas",Bench:"Traditional seating options for parks and public spaces","Table Setting":"Combined table and seating arrangements for picnic areas",Lounge:"Comfortable extended seating for relaxation areas",Stadium:"Tiered seating solutions for sports and event venues",Custom:"Bespoke seating arrangements designed to specification",Solar:"Self-sufficient lighting powered by renewable energy","Mains Powered":"Connected lighting solutions with reliable performance","Decorative Light":"Aesthetic lighting features that enhance landscapes",Security:"High visibility lighting for safety and security","Pathway Light":"Directional lighting for walkways and pedestrian areas"}[t]||`${t} product line with various options and configurations.`}function ge(t,a){const s={Peninsula:["Modern","Weather-resistant","Versatile"],Whyalla:["Robust","Wind-resistant","Durable"],Coastal:["Corrosion-resistant","Salt-proof","UV-stable"],Urban:["Contemporary","Modular","Space-efficient"],Heritage:["Traditional","Ornate","Classic"],EcoSan:["Eco-friendly","Low-water","Composting"],Standard:["Cost-effective","Reliable","Low-maintenance"],Accessible:["ADA Compliant","Spacious","Universal"],Premium:["High-end","Enhanced features","Superior finishes"],Compact:["Space-saving","Efficient","Urban-friendly"],"Small Span":["Compact","Decorative","Easy-install"],"Large Span":["Extended","Reinforced","Heavy-load"],Pedestrian:["High-traffic","Safety-focused","Accessible"],Decorative:["Ornamental","Artistic","Feature piece"],"Heavy Duty":["Vehicle-rated","Industrial","Maximum strength"],default:["Quality","Durable","Customizable"]};return s[t]||s.default}const je=({data:t,productRange:a,selection:s,onSelect:r})=>{t.products[a];const d=b.useMemo(()=>{var p;if(t.productsData&&t.relationships){const f=a.toLowerCase().replace(/\s+/g,"-"),m=t.relationships.rangeToProducts[f]||[];return t.productsData.filter(v=>m.includes(v.id)&&v.active!==!1)}return(((p=t.products)==null?void 0:p[a])||[]).map(f=>({id:f.toLowerCase(),code:f,name:`${f} Product`,overview:T(f),description:T(f),specifications:[],imageGallery:[],files:{},active:!0}))},[t.productsData,t.relationships,t.products,a]),l={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},n={hidden:{opacity:0,y:10},show:{opacity:1,y:0}};return e.jsxs("div",{children:[e.jsxs("p",{className:"text-default-600 mb-6",children:["Select a specific product from the ",a," range:"]}),e.jsx(j.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",variants:l,initial:"hidden",animate:"show",children:d.map(i=>{const p=s===i.code;return i.imageGallery.length>0,e.jsx(j.div,{variants:n,children:e.jsxs(N,{isPressable:!0,onPress:()=>r(i.code),className:`h-full w-full transition-all duration-200 ${p?"border-2 border-primary shadow-md":"border border-default-200 hover:border-primary hover:shadow-sm"}`,children:[e.jsxs(S,{className:"p-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("h3",{className:"text-lg font-medium",children:i.name})}),e.jsx("p",{className:"text-default-500 text-sm text-center",children:i.overview||i.description}),i.specifications.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-default-700 text-center",children:"Key Features:"}),e.jsxs("div",{className:"text-xs text-default-500",children:[i.specifications.slice(0,3).map((f,m)=>e.jsxs("div",{className:"flex items-start justify-center",children:[e.jsx(g,{icon:"lucide:check",width:14,className:"mr-1 mt-0.5 text-success"}),e.jsx("span",{children:f})]},m)),i.specifications.length>3&&e.jsxs("div",{className:"text-default-400 mt-1",children:["+",i.specifications.length-3," more features"]})]})]})]}),Object.keys(i.files).length>0&&e.jsx(oe,{className:"border-t border-default-100 px-4 py-2 justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-default-600",children:[e.jsx(g,{icon:"lucide:file-text",width:14}),e.jsxs("span",{children:[Object.keys(i.files).length," document",Object.keys(i.files).length!==1?"s":""," available"]})]})})]})},i.id)})})]})};function T(t){const a=t.match(/[A-Z]+\d+/),s=a?a[0]:t;return{K301:"Compact shelter with modern design, suitable for parks and urban settings.",K302:"Medium-sized shelter with extended roof coverage for picnic areas.",K308:"Large shelter with multiple seating options and enhanced weather protection.",K310:"Premium shelter with architectural design elements and superior materials.",K315:"Deluxe shelter with integrated seating and optional power connections.",E201:"Eco-friendly toilet with composting technology and minimal water usage.",E202:"Solar-powered toilet facility with self-contained waste management.",SS101:"Small pedestrian bridge for garden paths and decorative water crossings.",SS102:"Compact bridge with enhanced load capacity for light maintenance vehicles.",R101:"ADA compliant access ramp with gentle slope and non-slip surface.",R102:"Modular ramp system adaptable to various height requirements."}[s]||`${t} model with standard features and customization options.`}const ve=({data:t,productId:a})=>{const s=t.productDetails[a],r=b.useCallback(async(n,i)=>{try{const p=n.includes("digitaloceanspaces.com");let f=n;if(p){const v=new URL("/wp-json/urbana/v1/proxy-download",window.location.origin);v.searchParams.set("url",n),f=v.toString()}const m=document.createElement("a");m.href=f,m.download=i,m.style.display="none",m.target="_blank",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(p){console.error("Download failed:",p),alert("Failed to download file. Please try again or contact support.")}},[]);if(!s)return e.jsxs("div",{className:"text-center p-8",children:[e.jsx(g,{icon:"lucide:file-question",className:"mx-auto mb-4 text-default-400",width:48}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Product Information Unavailable"}),e.jsxs("p",{className:"text-default-500",children:["Detailed information for ",a," is not available at this time. Please continue to the next step or contact our support team for assistance."]})]});const d={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}},l=s.imageGallery.length>0?s.imageGallery[0]:"";return e.jsxs(j.div,{className:"space-y-8",initial:"hidden",animate:"show",variants:d,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(D,{removeWrapper:!0,alt:s.name,className:"w-full h-64 object-cover rounded-medium",src:l||`https://img.heroui.chat/image/${be(a)}`})}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.name}),e.jsx("p",{className:"text-default-600 mb-4",children:s.overview}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check-circle",className:"text-success",width:20}),e.jsx("span",{children:"In Stock"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:truck",className:"text-default-500",width:20}),e.jsx("span",{children:"Standard Delivery: 2-4 weeks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:shield",className:"text-default-500",width:20}),e.jsx("span",{children:"10 Year Warranty"})]})]})]})]}),e.jsxs(z,{"aria-label":"Product information tabs",variant:"underlined",color:"primary",children:[e.jsx(k,{title:"Details",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-default-700",children:s.description}),e.jsx("h4",{className:"text-lg font-medium mt-6 mb-3",children:"Specifications"}),e.jsx("ul",{className:"space-y-2",children:s.specifications.map((n,i)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(g,{icon:"lucide:chevron-right",className:"text-primary mt-1 flex-shrink-0",width:16}),e.jsx("span",{children:n})]},i))})]})})})},"details"),e.jsx(k,{title:"Image Gallery",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:s.imageGallery.map((n,i)=>e.jsx("div",{className:"aspect-square",children:e.jsx(D,{removeWrapper:!0,alt:`${s.name} - Image ${i+1}`,className:"w-full h-full object-cover rounded-medium",src:`${n}`})},i))})})})},"gallery"),e.jsx(k,{title:"Downloads",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-default-600 mb-4",children:"Download product documentation and technical files:"}),e.jsx("div",{className:"space-y-3",children:Object.entries(s.files).map(([n,i])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-default-200 rounded-medium hover:border-primary transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-default-100 rounded-medium",children:e.jsx(g,{icon:ye(i),className:"text-default-600",width:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n}),e.jsx("p",{className:"text-xs text-default-500",children:we(i)})]})]}),e.jsx(E,{size:"sm",variant:"flat",color:"primary",onPress:()=>r(i,Ne(i,n)),endContent:e.jsx(g,{icon:"lucide:download",width:16}),children:"Download"})]},i))})]})})})},"files"),e.jsx(k,{title:"FAQ",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsxs(se,{children:[e.jsx(F,{title:"What is the installation process?",children:"Installation typically requires a concrete foundation and can be completed by our certified installers. The process usually takes 1-3 days depending on the product complexity and site conditions."},"1"),e.jsx(F,{title:"What maintenance is required?",children:"Our products are designed for minimal maintenance. We recommend a visual inspection every 6 months and cleaning as needed. Specific maintenance schedules are provided in the product documentation."},"2"),e.jsx(F,{title:"Are customizations available?",children:"Yes, most products can be customized with different colors, materials, and additional features. Custom options can be selected in the next step of this configuration process."},"3"),e.jsx(F,{title:"What warranty is provided?",children:"Standard warranty is 10 years on structural components and 5 years on other elements. Extended warranties are available for purchase. All warranties cover manufacturing defects and normal wear."},"4")]})})})},"faq")]})]})};function be(t){const a=t.charAt(0);return{K:"landscape",W:"landscape",C:"landscape",U:"landscape",H:"landscape",E:"places",S:"places",A:"places",P:"places",SS:"landscape",LS:"landscape",R:"places",ST:"places",B:"furniture",TS:"furniture",SL:"places",MP:"places"}[a]||"places"}function ye(t){var r;const a=(r=t.split(".").pop())==null?void 0:r.toLowerCase(),s={pdf:"lucide:file-text",dwg:"lucide:file-cog",rvt:"lucide:file-3d",doc:"lucide:file-text",docx:"lucide:file-text",xls:"lucide:file-spreadsheet",xlsx:"lucide:file-spreadsheet",zip:"lucide:file-archive",default:"lucide:file"};return s[a||""]||s.default}function we(t){var r;const a=(r=t.split(".").pop())==null?void 0:r.toLowerCase(),s={pdf:"2.4 MB",dwg:"5.8 MB",rvt:"12.6 MB",doc:"1.2 MB",docx:"1.5 MB",xls:"3.1 MB",xlsx:"3.4 MB",zip:"8.7 MB",default:"1.0 MB"};return s[a||""]||s.default}function Ne(t,a){var r;try{const d=t.split("/"),l=d[d.length-1];if(l&&l.includes("."))return decodeURIComponent(l)}catch(d){console.error("Error extracting filename from URL:",d)}const s=(r=t.split(".").pop())==null?void 0:r.toLowerCase();return s&&!a.includes(".")?`${a}.${s}`:a}const Se=({data:t,options:a,onOptionsChange:s,selectedProductCode:r})=>{const d=b.useRef(r),l=b.useMemo(()=>{var u;return r?(u=t.productOptions)!=null&&u[r]?t.productOptions[r]:{}:t.options},[r,t.productOptions,t.options]);console.log(t);const n=b.useMemo(()=>Object.keys(l).length>0,[l]),i=b.useMemo(()=>{const u={},h=Object.keys(l);return Object.entries(a).forEach(([c,x])=>{h.includes(c)&&(u[c]=x)}),u},[a,l]);b.useEffect(()=>{if(d.current!==r){d.current=r;const u=Object.keys(l),h=Object.keys(a);if(h.some(x=>!u.includes(x))||h.length===0){const x={};h.forEach(C=>{u.includes(C)&&(x[C]=a[C])}),JSON.stringify(x)!==JSON.stringify(a)&&s(x)}}},[r,l]);const p=b.useCallback((u,h)=>{s({...i,[u]:h})},[i,s]),f=b.useMemo(()=>{const u=Object.keys(a);if(u.length===0)return null;for(let h=u.length-1;h>=0;h--){const c=u[h],x=a[c];if(l[c]){const y=l[c].find(C=>C.value===x);if(y!=null&&y.imageUrl)return y.imageUrl}}return null},[a,l]),m=b.useMemo(()=>{var u;if(r&&((u=t.productDetails)!=null&&u[r])){const h=t.productDetails[r].imageGallery;if(h&&h.length>0)return h[0]}return"https://img.heroui.chat/image/landscape?w=800&h=600&u=preview_default"},[r,t.productDetails]),v=f||m,P={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}};return n?e.jsxs(j.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:P,children:[r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-default-600",children:[e.jsx(g,{icon:"lucide:package",width:16}),e.jsxs("span",{children:["Configuring options for: ",e.jsx("strong",{children:r})]})]}),e.jsx("p",{className:"text-default-600 mb-4",children:"Customize your product by selecting from the available options below:"}),e.jsxs(z,{"aria-label":"Product configuration tabs",variant:"underlined",color:"primary",children:[e.jsx(k,{title:"Configuration Options",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(l).map(([u,h])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-default-700",children:u}),e.jsx(J,{label:u,placeholder:`Select ${u}`,selectedKeys:a[u]?[a[u]]:[],onChange:c=>{const x=c.target.value;p(u,x)},className:"max-w-full",children:h.map(c=>e.jsx(Q,{children:typeof c=="string"?c:c.value},typeof c=="string"?c:c.value))})]},u))}),e.jsx("div",{children:e.jsxs("div",{className:"border border-default-200 rounded-medium p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Preview"}),e.jsx("div",{className:"aspect-video mb-4",children:e.jsx(D,{removeWrapper:!0,alt:"Product preview with selected options",className:"w-full h-full object-cover rounded-medium",src:v},v)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-medium text-default-500",children:"Selected Options:"}),Object.keys(i).length>0?e.jsx("ul",{className:"text-sm space-y-1",children:Object.entries(i).map(([u,h])=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(g,{icon:"lucide:check",className:"text-success",width:14}),e.jsxs("span",{className:"font-medium",children:[u,":"]})," ",h]},u))}):e.jsx("p",{className:"text-sm text-default-500",children:"No options selected yet. Choose from the available options."})]})]})})]})})})},"options"),e.jsx(k,{title:"Option Impact",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"How Options Affect Your Product"}),e.jsx("p",{className:"text-default-600",children:"Different options can impact the appearance, durability, and functionality of your product. Below is a summary of how each option affects your selection."})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(l).map(([u,h])=>e.jsxs("div",{className:"border-b border-default-200 pb-4 last:border-0",children:[e.jsx("h5",{className:"font-medium mb-2",children:u}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:h.map((c,x)=>{const y=typeof c=="string"?c:c.value,C=typeof c=="object"&&c.imageUrl?c.imageUrl:null;return e.jsxs("div",{className:"p-3 border border-default-200 rounded-medium",children:[C&&e.jsx("div",{className:"aspect-video mb-2 rounded-small overflow-hidden",children:e.jsx(D,{removeWrapper:!0,alt:y,className:"w-full h-full object-cover",src:C})}),e.jsx("div",{className:"font-medium",children:y}),e.jsxs("div",{className:"text-sm text-default-500",children:[x===0&&"Standard option with included features",x===1&&"Enhanced durability and premium finish",x===2&&"Maximum performance and longevity"]})]},y)})})]},u))})]})})})},"impact"),e.jsx(k,{title:"Pricing Impact",children:e.jsx(N,{children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-lg font-medium",children:"Option Pricing"}),e.jsx("p",{className:"text-default-600",children:"Different configuration options affect the final price of your product. Below is a breakdown of how each selection impacts pricing."})]}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-default-200",children:[e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Option"}),e.jsx("th",{className:"py-2 px-4 text-left font-medium",children:"Selection"}),e.jsx("th",{className:"py-2 px-4 text-right font-medium",children:"Price Impact"})]})}),e.jsx("tbody",{children:Object.entries(l).map(([u,h])=>e.jsx(I.Fragment,{children:h.map((c,x)=>{const y=typeof c=="string"?c:c.value;return e.jsxs("tr",{className:"border-b border-default-100",children:[x===0?e.jsx("td",{className:"py-2 px-4 align-top",rowSpan:h.length,children:u}):null,e.jsxs("td",{className:"py-2 px-4",children:[y,x===0&&e.jsx("span",{className:"text-xs text-default-400 ml-2",children:"(Standard)"})]}),e.jsx("td",{className:"py-2 px-4 text-right",children:x===0?"Included":`+$${(x*250+Math.random()*100).toFixed(0)}`})]},`${u}-${y}`)})},u))})]}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium",children:e.jsxs("p",{className:"text-sm text-default-600",children:[e.jsx(g,{icon:"lucide:info",className:"inline-block mr-2",width:16}),"For exact pricing including all options and installation, please complete the form in the next step and our team will provide a detailed quote."]})})]})})})},"pricing")]})]}):e.jsx(j.div,{className:"space-y-6",initial:"hidden",animate:"show",variants:P,children:e.jsx(N,{children:e.jsxs(S,{className:"p-8 text-center",children:[e.jsx(g,{icon:"lucide:settings",width:48,className:"text-default-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Configuration Options"}),e.jsx("p",{className:"text-default-600",children:r?e.jsxs(e.Fragment,{children:["This product doesn't have any configurable options.",e.jsxs("span",{className:"block mt-2 text-sm",children:["Product: ",e.jsx("strong",{children:r})]})]}):"Please select a product first to see available configuration options."}),e.jsx("p",{className:"text-sm text-default-500 mt-4",children:r?"Proceed to the next step to complete your inquiry.":"Go back to the previous step and select a product."})]})})})},Pe=({data:t,contactInfo:a,onContactInfoChange:s,isSubmitting:r,isSubmitted:d,onSubmit:l})=>{const[n,i]=I.useState(!1),[p,f]=I.useState({}),m=(c,x)=>{s({...a,[c]:x}),p[c]&&f({...p,[c]:""})},v=()=>{const c={};return a.fullName.trim()||(c.fullName="Full name is required"),a.email.trim()?/^\S+@\S+\.\S+$/.test(a.email)||(c.email="Please enter a valid email address"):c.email="Email is required",n||(c.terms="You must accept the terms and conditions"),f(c),Object.keys(c).length===0},P=()=>{v()&&l()},u={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return d?e.jsxs(j.div,{className:"text-center py-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(g,{icon:"lucide:check",className:"text-success",width:32})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-default-600 max-w-md mx-auto mb-6",children:"Your product configuration has been submitted successfully. Our team will review your selections and contact you shortly with pricing and next steps."})]}):e.jsxs(j.div,{className:"space-y-6",variants:u,initial:"hidden",animate:"show",children:[e.jsx(j.p,{variants:h,className:"text-default-600",children:"Please provide your contact information to receive a detailed quote for your configured product."}),e.jsxs(j.div,{variants:h,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Full Name",placeholder:"Enter your full name",value:a.fullName,onValueChange:c=>m("fullName",c),isRequired:!0,isInvalid:!!p.fullName,errorMessage:p.fullName}),e.jsx(M,{label:"Email Address",placeholder:"Enter your email address",type:"email",value:a.email,onValueChange:c=>m("email",c),isRequired:!0,isInvalid:!!p.email,errorMessage:p.email})]}),e.jsxs(j.div,{variants:h,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(M,{label:"Phone Number",placeholder:"Enter your phone number",type:"tel",value:a.phone,onValueChange:c=>m("phone",c)}),e.jsx(M,{label:"Company/Organization",placeholder:"Enter your company or organization",value:a.company,onValueChange:c=>m("company",c)})]}),e.jsx(j.div,{variants:h,children:e.jsx(ae,{label:"Additional Notes",placeholder:"Enter any specific requirements or questions",value:a.message,onValueChange:c=>m("message",c),minRows:3})}),e.jsxs(j.div,{variants:h,className:"space-y-4",children:[e.jsx(ie,{isSelected:n,onValueChange:i,isInvalid:!!p.terms,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"I agree to the Terms and Conditions and Privacy Policy"}),p.terms&&e.jsx("span",{className:"text-danger text-xs mt-1",children:p.terms})]})}),e.jsx("div",{className:"bg-default-50 p-4 rounded-medium text-sm text-default-600",children:e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(g,{icon:"lucide:shield",className:"text-default-500 mt-0.5 flex-shrink-0",width:16}),e.jsx("span",{children:"Your information is secure and will only be used to process your product inquiry. We will never share your details with third parties without your consent."})]})})]}),e.jsx(j.div,{variants:h,className:"pt-4",children:e.jsx(E,{color:"primary",size:"lg",className:"w-full md:w-auto",isDisabled:r,isLoading:r,onPress:P,endContent:!r&&e.jsx(g,{icon:"lucide:send",width:18}),children:"Submit Configuration"})})]})},$={productGroup:null,productRange:null,individualProduct:null,options:{},contactInfo:{fullName:"",email:"",phone:"",company:"",message:""}},R=ne()(re(le((t,a)=>({productData:null,currentStep:1,selections:$,isSubmitting:!1,isSubmitted:!1,initializeProductData:()=>{const s=window.urbanaPublic;s!=null&&s.productData?(console.log("Initializing stepper with database product data"),t({productData:s.productData})):console.warn("No database product data found in window.urbanaPublic")},setProductData:s=>{t({productData:s})},setCurrentStep:s=>t({currentStep:s}),updateSelection:(s,r)=>t(d=>{const l={...d.selections};return s==="productGroup"?(l.productGroup=r,l.productRange=null,l.individualProduct=null):s==="productRange"?(l.productRange=r,l.individualProduct=null):s==="options"?l.options={...l.options,...r}:s==="contactInfo"?l.contactInfo={...l.contactInfo,...r}:l[s]=r,{selections:l}}),nextStep:()=>t(s=>({currentStep:Math.min(s.currentStep+1,6)})),previousStep:()=>t(s=>({currentStep:Math.max(s.currentStep-1,1)})),goToStep:s=>{var n,i;const{selections:r,productData:d}=a(),l=((i=(n=d==null?void 0:d.stepperForm)==null?void 0:n.steps)==null?void 0:i.length)||6;return s<1||s>l?!1:s===1||s===2&&r.productGroup||s===3&&r.productRange||s>=4&&r.individualProduct?(t({currentStep:s}),!0):!1},setSubmitting:s=>t({isSubmitting:s}),setSubmitted:s=>t({isSubmitted:s}),resetStepper:()=>t({currentStep:1,selections:$,isSubmitting:!1,isSubmitted:!1}),canProceedToStep:s=>{var n,i;const{selections:r,productData:d}=a(),l=((i=(n=d==null?void 0:d.stepperForm)==null?void 0:n.steps)==null?void 0:i.length)||6;if(s>l)return!1;switch(s){case 1:return!0;case 2:return!!r.productGroup;case 3:return!!r.productRange;case 4:case 5:case 6:return!!r.individualProduct;default:return!1}}}),{name:"urbana-stepper-storage",partialize:t=>({selections:t.selections,currentStep:t.currentStep})}),{name:"urbana-stepper"})),Ce=({data:t})=>{const{currentStep:a,selections:s,isSubmitting:r,isSubmitted:d,updateSelection:l,nextStep:n,previousStep:i,goToStep:p,canProceedToStep:f}=R(),m=t.stepperForm.steps.length,v=b.useMemo(()=>{var G;if(!s.individualProduct)return{};const o=t.stepperForm.steps[4],O=(G=o==null?void 0:o.productOptions)==null?void 0:G[s.individualProduct];if(!O)return{};const w={},q=Object.keys(O);return Object.entries(s.options).forEach(([L,W])=>{q.includes(L)&&(w[L]=W)}),w},[s.individualProduct,s.options,t.stepperForm.steps]),P=b.useCallback(async()=>{var o;R.getState().setSubmitting(!0);try{const O={productGroup:s.productGroup,productRange:s.productRange,individualProduct:s.individualProduct,options:v,contactInfo:s.contactInfo};if(console.log("Submitting form data:",O),!(await fetch("/wp-json/urbana/v1/submit-form",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((o=window.urbanaPublic)==null?void 0:o.nonce)||""},body:JSON.stringify({selections:O,submittedAt:new Date().toISOString()})})).ok)throw new Error("Failed to submit form");R.getState().setSubmitted(!0)}catch(O){console.error("Error submitting form:",O),alert("Failed to submit form. Please try again.")}finally{R.getState().setSubmitting(!1)}},[s,v]),u=o=>{p(o)},h=()=>{n()},c=()=>{i()},x=I.useCallback(()=>{var O;const o=t.stepperForm.steps[a-1];switch(a){case 1:return e.jsx(me,{data:{categories:(o==null?void 0:o.categories)||[],productGroups:(o==null?void 0:o.productGroups)||[]},selection:s.productGroup||null,onSelect:w=>l("productGroup",w)});case 2:return e.jsx(fe,{data:{ranges:(o==null?void 0:o.ranges)||{},productRanges:(o==null?void 0:o.productRanges)||[],relationships:o==null?void 0:o.relationships},productGroup:s.productGroup||"",selection:s.productRange||null,onSelect:w=>l("productRange",w)});case 3:return e.jsx(je,{data:{products:(o==null?void 0:o.products)||{},productsData:(o==null?void 0:o.productsData)||[],relationships:o==null?void 0:o.relationships},productRange:s.productRange||"",selection:s.individualProduct||null,onSelect:w=>l("individualProduct",w)});case 4:return e.jsx(ve,{data:{productDetails:(o==null?void 0:o.productDetails)||{}},productId:s.individualProduct});case 5:return console.log(o,s.options),e.jsx(Se,{data:{options:(o==null?void 0:o.options)||{},productOptions:(o==null?void 0:o.productOptions)||{},productDetails:((O=t.stepperForm.steps[3])==null?void 0:O.productDetails)||{},dynamicUpdates:(o==null?void 0:o.dynamicUpdates)||{updateImages:!1,updateFiles:!1}},options:s.options||{},onOptionsChange:w=>l("options",w),selectedProductCode:s.individualProduct||void 0});case 6:return e.jsx(Pe,{data:{fields:(o==null?void 0:o.fields)||[]},contactInfo:s.contactInfo,onContactInfoChange:w=>l("contactInfo",w),isSubmitting:r,isSubmitted:d,onSubmit:P});default:return e.jsx("div",{children:"Unknown step"})}},[a,t.stepperForm.steps,s,l,r,d,P]),y=f(a+1),C=a===m,U={hidden:{opacity:0,x:10},visible:{opacity:1,x:0},exit:{opacity:0,x:-10}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{currentStep:a,totalSteps:m,steps:t.stepperForm.steps,selections:s,onStepClick:u}),e.jsx(N,{className:"shadow-sm",children:e.jsx(S,{className:"p-6",children:e.jsxs(j.div,{initial:"hidden",animate:"visible",exit:"exit",variants:U,transition:{duration:.25},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:t.stepperForm.steps[a-1].title}),x()]},a)})}),e.jsx(de,{currentStep:a,totalSteps:m,onNext:h,onPrevious:c,canProceed:y,isLastStep:C,isSubmitting:r,isSubmitted:d,onSubmit:P})]})};function Oe(){const{productData:t,initializeProductData:a}=R(),[s,r]=b.useState(!0),[d,l]=b.useState(null);return b.useEffect(()=>{try{const n=window.urbanaPublic;n!=null&&n.productData?(console.log("Loading product data from database:",n.productData),a(),l(null)):(console.warn("No product data found in window.urbanaPublic, using default data"),R.getState().setProductData(_),l("Using default product data - database may be empty"))}catch(n){console.error("Error initializing product data:",n),l("Failed to load product data"),R.getState().setProductData(_)}finally{r(!1)}},[a]),s?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(X,{size:"lg"}),e.jsx("p",{className:"text-foreground-600",children:"Loading product configuration..."})]})})}):t?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Product Configuration"}),e.jsx("p",{className:"text-foreground-500 mt-2",children:"Select and customize your product in a few simple steps"})]}),d&&e.jsx(A,{color:"warning",variant:"flat",className:"mb-6",title:"Development Notice",description:d,startContent:e.jsx(g,{icon:"lucide:info",width:20})}),e.jsx(Ce,{data:t})]})})}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"py-12 px-4 sm:px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(A,{color:"danger",variant:"flat",className:"mb-6",title:"Configuration Error",description:"Unable to load product configuration data. Please contact support.",startContent:e.jsx(g,{icon:"lucide:alert-triangle",width:20})})})})})}Z.createRoot(document.getElementById("urbana-stepper-root")).render(e.jsx(I.StrictMode,{children:e.jsxs(ce,{children:[e.jsx(te,{}),e.jsx("main",{className:"text-foreground bg-background",children:e.jsx(Oe,{})})]})}));
